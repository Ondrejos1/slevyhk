<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studentsk√© slevy - Hradec Kr√°lov√© üéì</title>
    
    <meta name="theme-color" content="#8B5CF6">
    <meta name="description" content="Najdi nejlep≈°√≠ studentsk√© slevy v Hradci Kr√°lov√©">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #8B5CF6;
            --primary-dark: #7C3AED;
            --secondary: #F472B6;
            --accent: #34D399;
            --warning: #FBBF24;
            --premium: #FFD700;
            --dark: #1F2937;
            --darker: #111827;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1F2937 0%, #111827 50%, #0F172A 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 20s infinite;
        }

        .blob:nth-child(1) {
            width: 600px;
            height: 600px;
            background: linear-gradient(45deg, #8B5CF6, #F472B6);
            top: -200px;
            left: -200px;
        }

        .blob:nth-child(2) {
            width: 400px;
            height: 400px;
            background: linear-gradient(45deg, #34D399, #3B82F6);
            bottom: -100px;
            right: -100px;
            animation-delay: -5s;
        }

        .blob:nth-child(3) {
            width: 300px;
            height: 300px;
            background: linear-gradient(45deg, #F472B6, #FBBF24);
            top: 50%;
            left: 50%;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(50px, 50px) rotate(90deg); }
            50% { transform: translate(0, 100px) rotate(180deg); }
            75% { transform: translate(-50px, 50px) rotate(270deg); }
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem 2rem;
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }

        .logo-icon { font-size: 1.8rem; }

        .nav-buttons {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(139, 92, 246, 0.5);
        }

        .btn-glass {
            background: var(--glass);
            color: white;
            border: 1px solid var(--glass-border);
        }

        .btn-glass:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-admin {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
        }

        .btn-favorite {
            background: linear-gradient(135deg, #F472B6, #EC4899);
            color: white;
        }

        .btn-icon {
            padding: 0.75rem;
            min-width: 44px;
            justify-content: center;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #9CA3AF;
            font-size: 0.9rem;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        main {
            padding-top: 80px;
            min-height: 100vh;
        }

        /* Deal of the Day Banner */
        .deal-of-day {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            padding: 1rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .deal-of-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(50%); }
        }

        .deal-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .deal-badge {
            background: white;
            color: #FF6B6B;
            padding: 0.3rem 0.75rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.8rem;
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .deal-text {
            font-weight: 600;
        }

        .deal-text strong {
            font-size: 1.1rem;
        }

        .deal-timer {
            background: rgba(0,0,0,0.2);
            padding: 0.3rem 0.75rem;
            border-radius: 8px;
            font-family: 'Space Grotesk', monospace;
            font-weight: 600;
        }

        .deal-btn {
            background: white;
            color: #FF6B6B;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .deal-btn:hover {
            transform: scale(1.05);
        }

        .hero {
            padding: 2rem 2rem 3rem;
            text-align: center;
        }

        .hero h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, white 0%, #E5E7EB 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero h1 span {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            color: #9CA3AF;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .location-banner {
            display: none;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 1rem 1.5rem;
            margin: 0 auto 2rem;
            max-width: 500px;
            align-items: center;
            gap: 1rem;
        }

        .location-banner.active { display: flex; }
        .location-banner .icon { font-size: 2rem; }
        .location-banner .info { flex: 1; }
        .location-banner .info strong { display: block; color: #3B82F6; }
        .location-banner .info span { font-size: 0.85rem; color: #9CA3AF; }

        .stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            padding: 1rem;
            background: var(--glass);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            min-width: 120px;
        }

        .stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label { color: #9CA3AF; font-size: 0.85rem; }

        .online-now {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            color: #9CA3AF;
            font-size: 0.9rem;
        }

        .online-dot {
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.5); }
            50% { box-shadow: 0 0 0 10px rgba(52, 211, 153, 0); }
        }

        .filters-section {
            padding: 0 2rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .filters-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .filters-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .search-sort-row {
            display: flex;
            gap: 1rem;
            flex: 1;
            max-width: 600px;
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            flex: 1;
            min-width: 200px;
        }

        .search-box input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border-radius: 50px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .search-box input::placeholder { color: #6B7280; }

        .search-box .icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6B7280;
        }

        .sort-select {
            padding: 0.75rem 1rem;
            border-radius: 50px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            min-width: 180px;
        }

        .sort-select option { background: #1F2937; color: white; }

        .filter-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .category-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            flex: 1;
        }

        .category-chip {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: #D1D5DB;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-chip:hover { background: rgba(255, 255, 255, 0.1); }

        .category-chip.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            color: white;
        }

        .filter-toggles { display: flex; gap: 0.5rem; }

        .toggle-chip {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: #D1D5DB;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-chip:hover { background: rgba(255, 255, 255, 0.1); }

        .toggle-chip.active {
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            border-color: transparent;
            color: white;
        }

        .map-section {
            padding: 0 2rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .map-container {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 1.5rem;
            height: 650px;
        }

        @media (max-width: 1024px) {
            .map-container { grid-template-columns: 1fr; height: auto; }
        }

        .map-wrapper {
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            position: relative;
        }

        #map { width: 100%; height: 100%; min-height: 500px; }

        .map-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .map-control-btn {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: rgba(17, 24, 39, 0.9);
            border: 1px solid var(--glass-border);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .map-control-btn:hover { background: var(--primary); }
        .map-control-btn.active { background: var(--accent); color: #111; }
        .map-control-btn.loading { animation: pulse-btn 1s infinite; }

        @keyframes pulse-btn {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .leaflet-container { font-family: 'Inter', sans-serif; }

        .custom-popup .leaflet-popup-content-wrapper {
            background: rgba(17, 24, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            color: white;
            min-width: 280px;
        }

        .custom-popup .leaflet-popup-tip { background: rgba(17, 24, 39, 0.95); }

        .popup-content { padding: 0.5rem; }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .popup-content h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            flex: 1;
        }

        .popup-favorite-btn {
            background: none;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 0;
            transition: transform 0.2s;
        }

        .popup-favorite-btn:hover { transform: scale(1.2); }

        .popup-discount {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent), #10B981);
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: #111;
        }

        .popup-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .stars { color: #FBBF24; font-size: 0.9rem; letter-spacing: 1px; }
        .stars-large { font-size: 1.5rem; letter-spacing: 2px; }
        .rating-count { color: #9CA3AF; font-size: 0.8rem; }
        .popup-meta { color: #9CA3AF; font-size: 0.85rem; }

        .popup-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .popup-stat {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .popup-stat.used { color: var(--accent); }

        .popup-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .popup-btn {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
        }

        .popup-btn-nav { background: linear-gradient(135deg, #4285F4, #34A853); color: white; }
        .popup-btn-detail { background: var(--glass); color: white; border: 1px solid var(--glass-border); }
        .popup-btn-share { background: linear-gradient(135deg, #E91E63, #9C27B0); color: white; }

        .discounts-list {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .list-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-header h3 { font-family: 'Space Grotesk', sans-serif; font-size: 1.1rem; }

        .list-count {
            background: var(--primary);
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .list-tabs {
            display: flex;
            border-bottom: 1px solid var(--glass-border);
        }

        .list-tab {
            flex: 1;
            padding: 0.75rem;
            background: none;
            border: none;
            color: #9CA3AF;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .list-tab:hover { background: rgba(255, 255, 255, 0.05); }

        .list-tab.active {
            color: white;
            background: rgba(139, 92, 246, 0.2);
            border-bottom: 2px solid var(--primary);
        }

        .list-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #9CA3AF;
        }

        .empty-state .icon { font-size: 4rem; margin-bottom: 1rem; }
        .empty-state h4 { font-family: 'Space Grotesk', sans-serif; color: white; margin-bottom: 0.5rem; }

        /* Premium/Sponsored Card */
        .discount-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .discount-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
            border-color: var(--primary);
        }

        .discount-card.favorite {
            border-color: rgba(244, 114, 182, 0.5);
            background: rgba(244, 114, 182, 0.05);
        }

        .discount-card.premium {
            border: 2px solid var(--premium);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05));
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .discount-card.premium::before {
            content: '‚≠ê DOPORUƒåUJEME';
            position: absolute;
            top: -10px;
            left: 1rem;
            background: linear-gradient(135deg, var(--premium), #FFA500);
            color: #111;
            padding: 0.2rem 0.75rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .discount-card.sponsored {
            border: 1px solid rgba(59, 130, 246, 0.5);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.05));
        }

        .discount-card.sponsored::before {
            content: 'üì¢ Sponzorov√°no';
            position: absolute;
            top: -10px;
            left: 1rem;
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            color: white;
            padding: 0.2rem 0.75rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .discount-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            gap: 0.5rem;
        }

        .discount-card-title { flex: 1; }

        .discount-card h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .discount-card-rating {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .discount-card-rating .stars { font-size: 0.75rem; }
        .discount-card-rating .rating-text { font-size: 0.75rem; color: #9CA3AF; }

        .favorite-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            transition: transform 0.2s;
        }

        .favorite-btn:hover { transform: scale(1.2); }

        .discount-badge {
            background: linear-gradient(135deg, var(--accent), #10B981);
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            color: #111;
        }

        .discount-card-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.5rem;
        }

        .discount-card-category,
        .distance-badge,
        .used-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.6rem;
            border-radius: 50px;
            font-size: 0.75rem;
        }

        .discount-card-category {
            background: rgba(139, 92, 246, 0.2);
            color: var(--primary);
        }

        .distance-badge {
            background: rgba(59, 130, 246, 0.2);
            color: #3B82F6;
        }

        .used-badge {
            background: rgba(52, 211, 153, 0.2);
            color: var(--accent);
        }

        .discount-card-info {
            color: #9CA3AF;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .isic-badge {
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }

        .verified-badge { color: var(--accent); font-size: 0.75rem; }

        .discount-card-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .card-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
            padding: 0.5rem 0.75rem;
            border: none;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .card-btn:hover { transform: scale(1.05); }
        .card-btn-nav { background: linear-gradient(135deg, #4285F4, #34A853); color: white; }
        .card-btn-detail { background: var(--glass); color: white; border: 1px solid var(--glass-border); }
        .card-btn-share { background: linear-gradient(135deg, #E91E63, #9C27B0); color: white; }

        /* Admin Section - ENHANCED */
        .admin-section {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .admin-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-stats {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .admin-stat {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            text-align: center;
        }

        .admin-stat .value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--warning);
        }

        .admin-stat .label {
            font-size: 0.75rem;
            color: #9CA3AF;
        }

        /* Admin Tabs */
        .admin-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            -webkit-overflow-scrolling: touch;
        }

        .admin-tab {
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: #9CA3AF;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-tab:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .admin-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            color: white;
        }

        .admin-tab .badge {
            background: rgba(239, 68, 68, 0.8);
            color: white;
            padding: 0.1rem 0.5rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .admin-tab.active .badge {
            background: rgba(255, 255, 255, 0.3);
        }

        .admin-panel {
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .admin-card h3 {
            font-family: 'Space Grotesk', sans-serif;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Admin Search & Filters */
        .admin-search-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .admin-search {
            flex: 1;
            min-width: 200px;
            position: relative;
        }

        .admin-search input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 0.9rem;
        }

        .admin-search input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .admin-search .icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6B7280;
        }

        .admin-filter-select {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 0.9rem;
            min-width: 150px;
        }

        .admin-filter-select option {
            background: #1F2937;
        }

        /* Discount Management Table */
        .discount-table {
            width: 100%;
            border-collapse: collapse;
        }

        .discount-table th {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 1px solid var(--glass-border);
            color: #9CA3AF;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .discount-table td {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }

        .discount-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .table-name {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .table-emoji {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .table-info h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.15rem;
        }

        .table-info span {
            font-size: 0.75rem;
            color: #9CA3AF;
        }

        .table-badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .table-badge.premium {
            background: linear-gradient(135deg, var(--premium), #FFA500);
            color: #111;
        }

        .table-badge.sponsored {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            color: white;
        }

        .table-badge.normal {
            background: rgba(255, 255, 255, 0.1);
            color: #9CA3AF;
        }

        .table-actions {
            display: flex;
            gap: 0.5rem;
        }

        .table-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .table-btn:hover {
            transform: scale(1.1);
        }

        .table-btn-edit {
            background: rgba(59, 130, 246, 0.2);
            color: #3B82F6;
        }

        .table-btn-delete {
            background: rgba(239, 68, 68, 0.2);
            color: #EF4444;
        }

        .table-btn-star {
            background: rgba(255, 215, 0, 0.2);
            color: var(--premium);
        }

        /* Mobile Table */
        .discount-cards-mobile {
            display: none;
        }

        @media (max-width: 768px) {
            .discount-table {
                display: none;
            }
            
            .discount-cards-mobile {
                display: block;
            }
        }

        .admin-discount-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .admin-discount-card.premium-card {
            border-color: var(--premium);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05));
        }

        .admin-discount-card.sponsored-card {
            border-color: #3B82F6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.05));
        }

        .admin-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .admin-card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .admin-card-title h4 {
            font-size: 1rem;
            font-weight: 600;
        }

        .admin-card-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .admin-card-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .admin-action-btn {
            flex: 1;
            min-width: 80px;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            border: none;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
            transition: all 0.3s;
        }

        .admin-action-btn:hover {
            transform: scale(1.02);
        }

        .admin-action-btn.edit {
            background: rgba(59, 130, 246, 0.2);
            color: #3B82F6;
        }

        .admin-action-btn.delete {
            background: rgba(239, 68, 68, 0.2);
            color: #EF4444;
        }

        .admin-action-btn.premium-btn {
            background: linear-gradient(135deg, var(--premium), #FFA500);
            color: #111;
        }

        .admin-action-btn.sponsored-btn {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            color: white;
        }

        .admin-action-btn.remove-status {
            background: rgba(255, 255, 255, 0.1);
            color: #9CA3AF;
        }

        /* Pending Item */
        .pending-item {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .pending-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .pending-info h4 {
            font-family: 'Space Grotesk', sans-serif;
            margin-bottom: 0.25rem;
        }

        .pending-info p {
            color: #9CA3AF;
            font-size: 0.85rem;
        }

        .pending-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: #9CA3AF;
            margin-bottom: 0.75rem;
        }

        .pending-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn-approve {
            background: linear-gradient(135deg, var(--accent), #10B981);
            color: #111;
        }

        .btn-reject {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
        }

        .btn-premium-set {
            background: linear-gradient(135deg, var(--premium), #FFA500);
            color: #111;
        }

        /* Category Management */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .category-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s;
        }

        .category-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .category-item-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .category-item-emoji {
            font-size: 1.5rem;
        }

        .category-item-name {
            font-weight: 600;
        }

        .category-item-count {
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .category-item-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Premium Info */
        .premium-info {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05));
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .premium-info h4 {
            color: var(--premium);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .premium-tiers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .premium-tier {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .premium-tier.recommended {
            border-color: var(--premium);
            position: relative;
        }

        .premium-tier.recommended::before {
            content: 'Nejobl√≠benƒõj≈°√≠';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--premium);
            color: #111;
            padding: 0.2rem 0.75rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .tier-name {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .tier-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .tier-price span {
            font-size: 0.85rem;
            color: #9CA3AF;
            font-weight: 400;
        }

        .tier-features {
            font-size: 0.8rem;
            color: #9CA3AF;
            text-align: left;
            list-style: none;
        }

        .tier-features li {
            padding: 0.25rem 0;
        }

        .tier-features li::before {
            content: '‚úì ';
            color: var(--accent);
        }

        /* Scrollable Admin Content */
        .admin-scrollable {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal-overlay.active { opacity: 1; visibility: visible; }

        .modal {
            background: linear-gradient(135deg, #1F2937, #111827);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: all 0.3s;
        }

        .modal-overlay.active .modal { transform: scale(1); }

        .modal.modal-lg {
            max-width: 700px;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #1F2937, #111827);
            z-index: 10;
        }

        .modal-header h2 { font-family: 'Space Grotesk', sans-serif; font-size: 1.3rem; }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover { background: rgba(239, 68, 68, 0.3); border-color: #EF4444; }

        .modal-body { padding: 1.5rem; }

        /* Detail Modal */
        .detail-hero { text-align: center; margin-bottom: 1.5rem; }
        .detail-hero .emoji { font-size: 4rem; margin-bottom: 0.5rem; }
        .detail-hero .discount-badge { font-size: 1.3rem; padding: 0.5rem 1.5rem; }

        .detail-rating {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .detail-rating .rating-info { text-align: left; }
        .detail-rating .rating-value { font-size: 1.2rem; font-weight: 700; }
        .detail-rating .rating-count { font-size: 0.85rem; color: #9CA3AF; }

        .detail-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .detail-stat { text-align: center; }
        .detail-stat .value { font-size: 1.5rem; font-weight: 700; color: var(--accent); }
        .detail-stat .label { font-size: 0.8rem; color: #9CA3AF; }

        .detail-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .detail-section-title { color: #9CA3AF; font-size: 0.85rem; margin-bottom: 0.25rem; }
        .detail-section-content { font-weight: 500; }

        .detail-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .detail-actions .btn { justify-content: center; }
        .detail-actions .btn-full { grid-column: span 2; }

        /* Used Section */
        .used-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .used-question { text-align: center; margin-bottom: 1rem; }
        .used-question h4 { font-family: 'Space Grotesk', sans-serif; margin-bottom: 0.5rem; }
        .used-question p { font-size: 0.85rem; color: #9CA3AF; }

        .used-buttons { display: flex; gap: 1rem; justify-content: center; }

        .used-btn {
            padding: 0.75rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .used-btn-yes { background: linear-gradient(135deg, var(--accent), #10B981); color: #111; border: none; }
        .used-btn-no { background: var(--glass); color: white; border: 1px solid var(--glass-border); }
        .used-btn:hover { transform: scale(1.05); }

        .already-used {
            text-align: center;
            padding: 1rem;
            background: rgba(52, 211, 153, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(52, 211, 153, 0.3);
        }

        .already-used .icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .already-used p { color: var(--accent); font-weight: 500; }

        /* Reviews */
        .reviews-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--glass-border);
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .reviews-header h4 { font-family: 'Space Grotesk', sans-serif; }

        .review-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .review-author { display: flex; align-items: center; gap: 0.5rem; }

        .review-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .review-name { font-weight: 600; font-size: 0.9rem; }
        .review-date { font-size: 0.75rem; color: #6B7280; }
        .review-stars { color: #FBBF24; font-size: 0.85rem; }
        .review-text { font-size: 0.9rem; color: #D1D5DB; line-height: 1.5; }

        .review-helpful {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
            color: #9CA3AF;
        }

        .review-helpful button {
            background: none;
            border: none;
            color: #9CA3AF;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: color 0.3s;
        }

        .review-helpful button:hover { color: var(--primary); }

        .add-review {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .add-review h5 { font-family: 'Space Grotesk', sans-serif; margin-bottom: 1rem; }

        .star-rating { display: flex; gap: 0.5rem; margin-bottom: 1rem; }

        .star-rating button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
            color: #4B5563;
        }

        .star-rating button:hover { transform: scale(1.2); }
        .star-rating button.active { color: #FBBF24; }

        .review-textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 80px;
            margin-bottom: 1rem;
        }

        .review-textarea:focus { outline: none; border-color: var(--primary); }
        .review-textarea::placeholder { color: #6B7280; }

        /* Share Modal */
        .share-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1.25rem;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--glass-border);
            background: var(--glass);
        }

        .share-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .share-option .icon { font-size: 2rem; }
        .share-option .label { font-size: 0.85rem; font-weight: 500; }

        .share-option.whatsapp { background: rgba(37, 211, 102, 0.15); border-color: rgba(37, 211, 102, 0.3); }
        .share-option.facebook { background: rgba(24, 119, 242, 0.15); border-color: rgba(24, 119, 242, 0.3); }
        .share-option.twitter { background: rgba(29, 161, 242, 0.15); border-color: rgba(29, 161, 242, 0.3); }
        .share-option.copy { background: rgba(139, 92, 246, 0.15); border-color: rgba(139, 92, 246, 0.3); }

        .share-preview {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .share-preview-title { font-size: 0.85rem; color: #9CA3AF; margin-bottom: 0.5rem; }
        .share-preview-content { font-size: 0.9rem; line-height: 1.5; }

        /* Form Styles */
        .form-group { margin-bottom: 1.25rem; }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #D1D5DB;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .form-group select option { background: #1F2937; color: white; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }
        .checkbox-group { display: flex; align-items: center; gap: 0.75rem; }
        .checkbox-group input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--primary); }
        .btn-submit { width: 100%; padding: 1rem; font-size: 1rem; }

        .auth-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1.5rem 0;
            color: #6B7280;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--glass-border);
        }

        .register-link { text-align: center; color: #9CA3AF; font-size: 0.9rem; }
        .register-link a { color: var(--primary); text-decoration: none; font-weight: 600; }

        /* Navigation Modal */
        .nav-modal { max-width: 420px; }
        .nav-modal-title { text-align: center; margin-bottom: 1.5rem; }
        .nav-modal-title .place-name { font-family: 'Space Grotesk', sans-serif; font-size: 1.3rem; font-weight: 600; color: white; }
        .nav-modal-title .place-address { color: #9CA3AF; font-size: 0.9rem; }
        .navigation-options { display: flex; flex-direction: column; gap: 0.75rem; }

        .nav-option-btn {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
            width: 100%;
        }

        .nav-option-btn .nav-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .nav-option-btn .nav-info { flex: 1; }
        .nav-option-btn .nav-name { display: block; font-weight: 600; }
        .nav-option-btn .nav-desc { display: block; font-size: 0.8rem; opacity: 0.7; }

        .nav-google { background: rgba(66, 133, 244, 0.15); color: white; border-color: rgba(66, 133, 244, 0.3); }
        .nav-google .nav-icon { background: linear-gradient(135deg, #4285F4, #34A853); }
        .nav-google:hover { background: rgba(66, 133, 244, 0.25); transform: translateY(-2px); }

        .nav-waze { background: rgba(51, 204, 255, 0.15); color: white; border-color: rgba(51, 204, 255, 0.3); }
        .nav-waze .nav-icon { background: linear-gradient(135deg, #33CCFF, #00D4FF); color: #111; }
        .nav-waze:hover { background: rgba(51, 204, 255, 0.25); transform: translateY(-2px); }

        .nav-mapy { background: rgba(228, 0, 43, 0.15); color: white; border-color: rgba(228, 0, 43, 0.3); }
        .nav-mapy .nav-icon { background: linear-gradient(135deg, #E4002B, #C00025); }
        .nav-mapy:hover { background: rgba(228, 0, 43, 0.25); transform: translateY(-2px); }

        .nav-apple { background: rgba(100, 100, 100, 0.15); color: white; border-color: rgba(100, 100, 100, 0.3); }
        .nav-apple .nav-icon { background: linear-gradient(135deg, #555, #333); }
        .nav-apple:hover { background: rgba(100, 100, 100, 0.25); transform: translateY(-2px); }

        .remember-choice {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        .remember-choice input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--primary); }
        .remember-choice label { color: #9CA3AF; font-size: 0.9rem; cursor: pointer; }

        /* Confirm Modal */
        .confirm-modal {
            max-width: 400px;
            text-align: center;
        }

        .confirm-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .confirm-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .confirm-message {
            color: #9CA3AF;
            margin-bottom: 1.5rem;
        }

        .confirm-buttons {
            display: flex;
            gap: 1rem;
        }

        .confirm-buttons .btn {
            flex: 1;
            justify-content: center;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 1rem 1.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 3000;
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.4);
            max-width: 350px;
        }

        .toast.active { transform: translateY(0); opacity: 1; }
        .toast.success { background: linear-gradient(135deg, var(--accent), #10B981); color: #111; }
        .toast.error { background: linear-gradient(135deg, #EF4444, #DC2626); }

        /* Footer */
        .last-updated { text-align: center; padding: 1rem; color: #6B7280; font-size: 0.85rem; }

        footer {
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid var(--glass-border);
            padding: 2rem;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .footer-links a { color: #9CA3AF; text-decoration: none; cursor: pointer; }
        .footer-links a:hover { color: var(--primary); }
        .footer-credits { color: #6B7280; font-size: 0.85rem; }

        /* Responsive */
        .view-toggle { display: none; }

        @media (max-width: 1024px) {
            .view-toggle { display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 1rem; }
            .map-container { display: block; }
            .discounts-list { display: none; height: 500px; }
            .map-wrapper { display: block; }
            .show-list .discounts-list { display: flex; }
            .show-list .map-wrapper { display: none; }
        }

        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .form-row-3 { grid-template-columns: 1fr; }
            .admin-tabs { gap: 0.25rem; }
            .admin-tab { padding: 0.6rem 1rem; font-size: 0.8rem; }
        }

        @media (max-width: 640px) {
            .hero h1 { font-size: 2rem; }
            .header-content { flex-direction: column; gap: 1rem; }
            .nav-buttons { width: 100%; justify-content: center; flex-wrap: wrap; }
            .detail-actions { grid-template-columns: 1fr; }
            .detail-actions .btn-full { grid-column: span 1; }
            .share-options { grid-template-columns: 1fr; }
            .deal-content { flex-direction: column; text-align: center; }
            .premium-tiers { grid-template-columns: 1fr; }
            .confirm-buttons { flex-direction: column; }
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }

        .user-location-marker {
            width: 20px;
            height: 20px;
            background: #3B82F6;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 8px rgba(59, 130, 246, 0.3);
        }

        .user-location-pulse {
            position: absolute;
            width: 40px;
            height: 40px;
            background: rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="bg-animation">
        <div class="blob"></div>
        <div class="blob"></div>
        <div class="blob"></div>
    </div>

    <header>
        <div class="header-content">
            <div class="logo" onclick="location.reload()">
                <span class="logo-icon">üéì</span>
                <span>Studentsk√© slevy</span>
            </div>
            <div class="nav-buttons" id="nav-buttons">
                <button class="btn btn-glass" onclick="openModal('login')">üë§ P≈ôihl√°sit</button>
                <button class="btn btn-primary" onclick="openModal('add')">‚ûï P≈ôidat</button>
            </div>
        </div>
    </header>

    <main>
        <!-- Deal of the Day -->
        <div class="deal-of-day" id="deal-of-day">
            <div class="deal-content">
                <span class="deal-badge">üî• SLEVA DNE</span>
                <span class="deal-text"><strong id="deal-name">CineStar Hradec</strong> - <span id="deal-discount">30% sleva</span> na vstupn√©!</span>
                <span class="deal-timer" id="deal-timer">Konƒç√≠ za 05:32:17</span>
                <button class="deal-btn" onclick="showDetail(dealOfDayId)">Zobrazit</button>
            </div>
        </div>

        <section class="hero">
            <h1>Studentsk√© slevy v <span>Hradci Kr√°lov√©</span> üéì</h1>
            <p>Najdi nejlep≈°√≠ slevy pro studenty. Hodno≈•, sd√≠lej a u≈°et≈ôi!</p>
            
            <div class="location-banner" id="location-banner">
                <div class="icon">üìç</div>
                <div class="info">
                    <strong>Poloha aktivn√≠</strong>
                    <span>Slevy jsou ≈ôazeny podle vzd√°lenosti</span>
                </div>
                <button class="btn btn-glass btn-icon" onclick="disableLocation()">‚úï</button>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="total-discounts">12</div>
                    <div class="stat-label">Aktivn√≠ch slev</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="total-used">0</div>
                    <div class="stat-label">Vyu≈æito dnes</div>
                </div>
                <div class="stat">
                    <div class="stat```html
-value" id="avg-rating">4.5</div>
                    <div class="stat-label">‚≠ê Hodnocen√≠</div>
                </div>
            </div>

            <div class="online-now">
                <span class="online-dot"></span>
                <span><strong id="online-count">23</strong> student≈Ø pr√°vƒõ hled√° slevy</span>
            </div>
        </section>

        <section class="filters-section">
            <div class="filters-card">
                <div class="filters-header">
                    <h3 class="filters-title">üîç Filtruj slevy</h3>
                    <div class="search-sort-row">
                        <div class="search-box">
                            <span class="icon">üîé</span>
                            <input type="text" id="search-input" placeholder="Hledat..." oninput="handleSearch()">
                        </div>
                        <select class="sort-select" id="sort-select" onchange="handleSort()">
                            <option value="featured">‚≠ê Doporuƒçen√©</option>
                            <option value="rating">üèÜ Nejl√©pe hodnocen√©</option>
                            <option value="popular">üî• Nejpou≈æ√≠vanƒõj≈°√≠</option>
                            <option value="discount">üí∞ Nejvy≈°≈°√≠ sleva</option>
                            <option value="distance">üìç Nejbli≈æ≈°√≠</option>
                            <option value="newest">üÜï Nejnovƒõj≈°√≠</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="category-filters" id="category-filters">
                        <button class="category-chip active" data-category="all" onclick="setCategory('all')">‚ú® V≈°e</button>
                        <button class="category-chip" data-category="food" onclick="setCategory('food')">üçï J√≠dlo</button>
                        <button class="category-chip" data-category="cafe" onclick="setCategory('cafe')">‚òï Kav√°rny</button>
                        <button class="category-chip" data-category="clothing" onclick="setCategory('clothing')">üëï Obleƒçen√≠</button>
                        <button class="category-chip" data-category="tech" onclick="setCategory('tech')">üíª Technika</button>
                        <button class="category-chip" data-category="beauty" onclick="setCategory('beauty')">üíÖ Kr√°sa</button>
                        <button class="category-chip" data-category="sport" onclick="setCategory('sport')">üèÉ Sport</button>
                        <button class="category-chip" data-category="entertainment" onclick="setCategory('entertainment')">üé¨ Z√°bava</button>
                        <button class="category-chip" data-category="services" onclick="setCategory('services')">üõ†Ô∏è Slu≈æby</button>
                    </div>
                    <div class="filter-toggles">
                        <button class="toggle-chip" id="filter-no-isic" onclick="toggleNoIsicFilter()">üÜì Bez ISIC</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="map-section">
            <div class="view-toggle">
                <button class="btn btn-glass active" id="view-map-btn" onclick="toggleView('map')">üó∫Ô∏è Mapa</button>
                <button class="btn btn-glass" id="view-list-btn" onclick="toggleView('list')">üìã Seznam</button>
            </div>
            
            <div class="map-container" id="map-container">
                <div class="map-wrapper">
                    <div id="map"></div>
                    <div class="map-controls">
                        <button class="map-control-btn" onclick="enableLocation()" id="center-user-btn" title="Moje poloha">üéØ</button>
                        <button class="map-control-btn" onclick="fitAllMarkers()" title="Zobrazit v≈°e">üó∫Ô∏è</button>
                    </div>
                </div>
                
                <div class="discounts-list">
                    <div class="list-header">
                        <h3>üìã Seznam slev</h3>
                        <span class="list-count" id="list-count">12</span>
                    </div>
                    <div class="list-tabs">
                        <button class="list-tab active" onclick="switchTab('all')" id="tab-all">üè™ V≈°echny</button>
                        <button class="list-tab" onclick="switchTab('favorites')" id="tab-favorites">‚ù§Ô∏è Obl√≠ben√© <span id="tab-favorites-count">(0)</span></button>
                    </div>
                    <div class="list-content" id="discount-list"></div>
                </div>
            </div>
            
            <div class="last-updated">üïê Aktualizov√°no: <span id="last-update">dnes</span></div>
        </section>

        <!-- Admin Section - ENHANCED -->
        <section class="admin-section" id="admin-section" style="display: none;">
            <div class="admin-header">
                <h2>üëë Admin Panel</h2>
                <div class="admin-stats">
                    <div class="admin-stat">
                        <div class="value" id="pending-count">0</div>
                        <div class="label">ƒåek√° na schv√°len√≠</div>
                    </div>
                    <div class="admin-stat">
                        <div class="value" id="total-discounts-admin">12</div>
                        <div class="label">Celkem slev</div>
                    </div>
                    <div class="admin-stat">
                        <div class="value" id="premium-count">2</div>
                        <div class="label">Premium</div>
                    </div>
                </div>
            </div>

            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchAdminTab('pending')" id="admin-tab-pending">
                    ‚è≥ Ke schv√°len√≠ <span class="badge" id="pending-badge">2</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('all')" id="admin-tab-all">
                    üìã V≈°echny slevy
                </button>
                <button class="admin-tab" onclick="switchAdminTab('add')" id="admin-tab-add">
                    ‚ûï P≈ôidat slevu
                </button>
                <button class="admin-tab" onclick="switchAdminTab('categories')" id="admin-tab-categories">
                    üè∑Ô∏è Kategorie
                </button>
                <button class="admin-tab" onclick="switchAdminTab('premium')" id="admin-tab-premium">
                    üíé Premium
                </button>
            </div>

            <!-- Pending Panel -->
            <div class="admin-panel active" id="admin-panel-pending">
                <div class="admin-card">
                    <h3>‚è≥ ƒåekaj√≠c√≠ na schv√°len√≠</h3>
                    <div class="admin-scrollable" id="pending-list">
                        <!-- Dynamically populated -->
                    </div>
                </div>
            </div>

            <!-- All Discounts Panel -->
            <div class="admin-panel" id="admin-panel-all">
                <div class="admin-card">
                    <h3>üìã Spr√°va v≈°ech slev</h3>
                    
                    <div class="admin-search-row">
                        <div class="admin-search">
                            <span class="icon">üîé</span>
                            <input type="text" id="admin-search" placeholder="Hledat slevu..." oninput="filterAdminDiscounts()">
                        </div>
                        <select class="admin-filter-select" id="admin-category-filter" onchange="filterAdminDiscounts()">
                            <option value="all">V≈°echny kategorie</option>
                            <option value="food">üçï J√≠dlo</option>
                            <option value="cafe">‚òï Kav√°rny</option>
                            <option value="clothing">üëï Obleƒçen√≠</option>
                            <option value="tech">üíª Technika</option>
                            <option value="beauty">üíÖ Kr√°sa</option>
                            <option value="sport">üèÉ Sport</option>
                            <option value="entertainment">üé¨ Z√°bava</option>
                            <option value="services">üõ†Ô∏è Slu≈æby</option>
                        </select>
                        <select class="admin-filter-select" id="admin-status-filter" onchange="filterAdminDiscounts()">
                            <option value="all">V≈°echny statusy</option>
                            <option value="recommended">‚≠ê Doporuƒçujeme</option>
                            <option value="sponsored">üì¢ Sponzorovan√©</option>
                            <option value="normal">üìç Bƒõ≈æn√©</option>
                        </select>
                    </div>

                    <!-- Desktop Table -->
                    <div class="admin-scrollable">
                        <table class="discount-table">
                            <thead>
                                <tr>
                                    <th>Podnik</th>
                                    <th>Kategorie</th>
                                    <th>Sleva</th>
                                    <th>Status</th>
                                    <th>Hodnocen√≠</th>
                                    <th>Akce</th>
                                </tr>
                            </thead>
                            <tbody id="admin-table-body">
                                <!-- Dynamically populated -->
                            </tbody>
                        </table>

                        <!-- Mobile Cards -->
                        <div class="discount-cards-mobile" id="admin-cards-mobile">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Discount Panel -->
            <div class="admin-panel" id="admin-panel-add">
                <div class="admin-card">
                    <h3>‚ûï P≈ôidat novou slevu (Admin)</h3>
                    <form onsubmit="adminAddDiscount(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label>N√°zev podniku *</label>
                                <input type="text" name="name" id="admin-add-name" placeholder="nap≈ô. Pizza Hut" required>
                            </div>
                            <div class="form-group">
                                <label>V√Ω≈°e slevy *</label>
                                <input type="text" name="discount" id="admin-add-discount" placeholder="nap≈ô. 15%" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Adresa *</label>
                            <input type="text" name="address" id="admin-add-address" placeholder="nap≈ô. Velk√© n√°mƒõst√≠ 123, Hradec Kr√°lov√©" required>
                        </div>
                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Kategorie *</label>
                                <select name="category" id="admin-add-category" required>
                                    <option value="">Vyber</option>
                                    <option value="food">üçï J√≠dlo</option>
                                    <option value="cafe">‚òï Kav√°rna</option>
                                    <option value="clothing">üëï Obleƒçen√≠</option>
                                    <option value="tech">üíª Technika</option>
                                    <option value="beauty">üíÖ Kr√°sa</option>
                                    <option value="sport">üèÉ Sport</option>
                                    <option value="entertainment">üé¨ Z√°bava</option>
                                    <option value="services">üõ†Ô∏è Slu≈æby</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Status</label>
                                <select name="premium" id="admin-add-premium">
                                    <option value="">Bƒõ≈æn√° sleva</option>
                                    <option value="sponsored">üì¢ Sponzorovan√©</option>
                                    <option value="recommended">‚≠ê Doporuƒçujeme</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ƒå√≠seln√° hodnota slevy</label>
                                <input type="number" name="discountValue" id="admin-add-discountValue" placeholder="15" min="1" max="100">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Zemƒõpisn√° ≈°√≠≈ôka (lat)</label>
                                <input type="text" name="lat" id="admin-add-lat" placeholder="50.2093">
                            </div>
                            <div class="form-group">
                                <label>Zemƒõpisn√° d√©lka (lng)</label>
                                <input type="text" name="lng" id="admin-add-lng" placeholder="15.8327">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Podm√≠nky slevy</label>
                            <textarea name="conditions" id="admin-add-conditions" rows="2" placeholder="nap≈ô. Plat√≠ pouze na hlavn√≠ j√≠dla, po-p√°..."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" name="isic" id="admin-add-isic">
                                    <label for="admin-add-isic">Vy≈æaduje ISIC kartu</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Pr≈Ømƒõrn√° √∫spora (Kƒç)</label>
                                <input type="number" name="avgSaving" id="admin-add-avgSaving" placeholder="50" min="1">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-submit">‚úÖ P≈ôidat slevu p≈ô√≠mo</button>
                    </form>
                </div>
            </div>

            <!-- Categories Panel -->
            <div class="admin-panel" id="admin-panel-categories">
                <div class="admin-card">
                    <h3>üè∑Ô∏è Spr√°va kategori√≠</h3>
                    <p style="color: #9CA3AF; margin-bottom: 1rem;">P≈ôehled kategori√≠ a poƒçtu slev v ka≈æd√© z nich.</p>
                    
                    <div class="category-grid" id="category-grid">
                        <!-- Dynamically populated -->
                    </div>

                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--glass-border);">
                        <h4 style="margin-bottom: 1rem;">‚ûï P≈ôidat novou kategorii</h4>
                        <form onsubmit="addCategory(event)" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <input type="text" id="new-category-emoji" placeholder="Emoji (nap≈ô. üéÆ)" style="width: 100px; padding: 0.75rem; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            <input type="text" id="new-category-name" placeholder="N√°zev kategorie" style="flex: 1; min-width: 150px; padding: 0.75rem; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            <input type="text" id="new-category-key" placeholder="Kl√≠ƒç (nap≈ô. gaming)" style="width: 150px; padding: 0.75rem; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            <button type="submit" class="btn btn-primary">‚ûï P≈ôidat</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Premium Panel -->
            <div class="admin-panel" id="admin-panel-premium">
                <div class="admin-card">
                    <h3>üíé Premium spr√°va</h3>
                    
                    <div class="admin-search-row">
                        <div class="admin-search">
                            <span class="icon">üîé</span>
                            <input type="text" id="premium-search" placeholder="Hledat slevu pro nastaven√≠ premium..." oninput="filterPremiumDiscounts()">
                        </div>
                    </div>

                    <div class="admin-scrollable" id="premium-list">
                        <!-- Dynamically populated -->
                    </div>

                    <div class="premium-info">
                        <h4>üí∞ Cen√≠k propagace</h4>
                        <div class="premium-tiers">
                            <div class="premium-tier">
                                <div class="tier-name">üì¢ Sponzorovan√©</div>
                                <div class="tier-price">299 Kƒç <span>/mƒõs√≠c</span></div>
                                <ul class="tier-features">
                                    <li>Zv√Ωraznƒõn√° karta</li>
                                    <li>Vy≈°≈°√≠ pozice v seznamu</li>
                                    <li>Badge "Sponzorov√°no"</li>
                                </ul>
                            </div>
                            <div class="premium-tier recommended">
                                <div class="tier-name">‚≠ê Doporuƒçujeme</div>
                                <div class="tier-price">599 Kƒç <span>/mƒõs√≠c</span></div>
                                <ul class="tier-features">
                                    <li>V≈°e ze Sponzorovan√©</li>
                                    <li>Zlat√Ω r√°meƒçek</li>
                                    <li>TOP pozice v seznamu</li>
                                    <li>Zobrazen√≠ na mapƒõ prioritnƒõ</li>
                                </ul>
                            </div>
                            <div class="premium-tier">
                                <div class="tier-name">üî• Sleva dne</div>
                                <div class="tier-price">199 Kƒç <span>/den</span></div>
                                <ul class="tier-features">
                                    <li>Banner na hlavn√≠ str√°nce</li>
                                    <li>Push notifikace u≈æivatel≈Øm</li>
                                    <li>Maxim√°ln√≠ viditelnost</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-links">
            <a href="#" onclick="openModal('business')">üè™ Pro podniky</a>
            <a href="#">üìß Kontakt</a>
            <a href="#">‚ùì FAQ</a>
        </div>
        <p class="footer-credits">Made with üíú pro studenty v Hradci Kr√°lov√© ‚Ä¢ 2025</p>
    </footer>

    <!-- Modals -->
    <div class="modal-overlay" id="modal-login">
        <div class="modal">
            <div class="modal-header">
                <h2>üë§ P≈ôihl√°≈°en√≠</h2>
                <button class="modal-close" onclick="closeModal('login')">√ó</button>
            </div>
            <div class="modal-body">
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="student@slevy.cz" required>
                    </div>
                    <div class="form-group">
                        <label>Heslo</label>
                        <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit">üîê P≈ôihl√°sit se</button>
                </form>
                <div class="auth-divider">nebo</div>
                <p class="register-link">Nem√°≈° √∫ƒçet? <a href="#" onclick="openModal('register'); closeModal('login');">Zaregistruj se</a></p>
                <p style="text-align: center; margin-top: 1rem; color: #6B7280; font-size: 0.8rem;">Demo: student@slevy.cz / heslo123<br>Admin: admin@slevy.cz / admin123</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-register">
        <div class="modal">
            <div class="modal-header">
                <h2>üìù Registrace</h2>
                <button class="modal-close" onclick="closeModal('register')">√ó</button>
            </div>
            <div class="modal-body">
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>Jm√©no</label>
                        <input type="text" name="name" placeholder="Jan Nov√°k" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="student@slevy.cz" required>
                    </div>
                    <div class="form-group">
                        <label>Heslo</label>
                        <input type="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit">üéì Vytvo≈ôit √∫ƒçet</button>
                </form>
                <div class="auth-divider">nebo</div>
                <p class="register-link">U≈æ m√°≈° √∫ƒçet? <a href="#" onclick="openModal('login'); closeModal('register');">P≈ôihlas se</a></p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-add">
        <div class="modal">
            <div class="modal-header">
                <h2>‚ûï P≈ôidat slevu</h2>
                <button class="modal-close" onclick="closeModal('add')">√ó</button>
            </div>
            <div class="modal-body">
                <form onsubmit="submitDiscount(event)">
                    <div class="form-group">
                        <label>N√°zev podniku *</label>
                        <input type="text" name="name" placeholder="nap≈ô. Pizza Hut" required>
                    </div>
                    <div class="form-group">
                        <label>Adresa *</label>
                        <input type="text" name="address" placeholder="nap≈ô. Velk√© n√°mƒõst√≠ 123, Hradec Kr√°lov√©" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>V√Ω≈°e slevy *</label>
                            <input type="text" name="discount" placeholder="nap≈ô. 10%" required>
                        </div>
                        <div class="form-group">
                            <label>Kategorie *</label>
                            <select name="category" required>
                                <option value="">Vyber</option>
                                <option value="food">üçï J√≠dlo</option>
                                <option value="cafe">‚òï Kav√°rna</option>
                                <option value="clothing">üëï Obleƒçen√≠</option>
                                <option value="tech">üíª Technika</option>
                                <option value="beauty">üíÖ Kr√°sa</option>
                                <option value="sport">üèÉ Sport</option>
                                <option value="entertainment">üé¨ Z√°bava</option>
                                <option value="services">üõ†Ô∏è Slu≈æby</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Podm√≠nky slevy</label>
                        <textarea name="conditions" rows="2" placeholder="nap≈ô. Plat√≠ pouze na hlavn√≠ j√≠dla, po-p√°..."></textarea>
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="isic" id="isic-check">
                            <label for="isic-check">Vy≈æaduje ISIC kartu</label>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit">üöÄ Odeslat ke schv√°len√≠</button>
                    <p style="text-align: center; margin-top: 1rem; color: #6B7280; font-size: 0.8rem;">Slevu schv√°l√≠ admin do 24 hodin</p>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-detail">
        <div class="modal">
            <div class="modal-header">
                <h2 id="detail-title">Detail slevy</h2>
                <button class="modal-close" onclick="closeModal('detail')">√ó</button>
            </div>
            <div class="modal-body" id="detail-content"></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-share">
        <div class="modal">
            <div class="modal-header">
                <h2>üì§ Sd√≠let slevu</h2>
                <button class="modal-close" onclick="closeModal('share')">√ó</button>
            </div>
            <div class="modal-body" id="share-content"></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-navigation">
        <div class="modal nav-modal">
            <div class="modal-header">
                <h2>üß≠ Navigace</h2>
                <button class="modal-close" onclick="closeModal('navigation')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="nav-modal-title">
                    <div class="place-name" id="nav-place-name">N√°zev</div>
                    <div class="place-address" id="nav-place-address">Adresa</div>
                </div>
                <div class="navigation-options">
                    <button class="nav-option-btn nav-google" onclick="navigateWithChoice('google')">
                        <div class="nav-icon">üó∫Ô∏è</div>
                        <div class="nav-info"><span class="nav-name">Google Maps</span><span class="nav-desc">Nejpopul√°rnƒõj≈°√≠</span></div>
                    </button>
                    <button class="nav-option-btn nav-waze" onclick="navigateWithChoice('waze')">
                        <div class="nav-icon">üöó</div>
                        <div class="nav-info"><span class="nav-name">Waze</span><span class="nav-desc">Dopravn√≠ info</span></div>
                    </button>
                    <button class="nav-option-btn nav-mapy" onclick="navigateWithChoice('mapy')">
                        <div class="nav-icon">üá®üáø</div>
                        <div class="nav-info"><span class="nav-name">Mapy.cz</span><span class="nav-desc">ƒåesk√© mapy</span></div>
                    </button>
                    <button class="nav-option-btn nav-apple" onclick="navigateWithChoice('apple')">
                        <div class="nav-icon">üçé</div>
                        <div class="nav-info"><span class="nav-name">Apple Maps</span><span class="nav-desc">Pro iPhone</span></div>
                    </button>
                </div>
                <div class="remember-choice">
                    <input type="checkbox" id="remember-nav-choice">
                    <label for="remember-nav-choice">Zapamatovat volbu</label>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Discount Modal -->
    <div class="modal-overlay" id="modal-edit">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h2>‚úèÔ∏è Upravit slevu</h2>
                <button class="modal-close" onclick="closeModal('edit')">√ó</button>
            </div>
            <div class="modal-body">
                <form onsubmit="saveEditDiscount(event)">
                    <input type="hidden" id="edit-id">
                    <div class="form-row">
                        <div class="form-group">
                            <label>N√°zev podniku *</label>
                            <input type="text" id="edit-name" required>
                        </div>
                        <div class="form-group">
                            <label>V√Ω≈°e slevy *</label>
                            <input type="text" id="edit-discount" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Adresa *</label>
                        <input type="text" id="edit-address" required>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group">
                            <label>Kategorie *</label>
                            <select id="edit-category" required>
                                <option value="food">üçï J√≠dlo</option>
                                <option value="cafe">‚òï Kav√°rna</option>
                                <option value="clothing">üëï Obleƒçen√≠</option>
                                <option value="tech">üíª Technika</option>
                                <option value="beauty">üíÖ Kr√°sa</option>
                                <option value="sport">üèÉ Sport</option>
                                <option value="entertainment">üé¨ Z√°bava</option>
                                <option value="services">üõ†Ô∏è Slu≈æby</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="edit-premium">
                                <option value="">Bƒõ≈æn√° sleva</option>
                                <option value="sponsored">üì¢ Sponzorovan√©</option>
                                <option value="recommended">‚≠ê Doporuƒçujeme</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ƒå√≠seln√° hodnota slevy</label>
                            <input type="number" id="edit-discountValue" min="1" max="100">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Zemƒõpisn√° ≈°√≠≈ôka (lat)</label>
                            <input type="text" id="edit-lat">
                        </div>
                        <div class="form-group">
                            <label>Zemƒõpisn√° d√©lka (lng)</label>
                            <input type="text" id="edit-lng">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Podm√≠nky slevy</label>
                        <textarea id="edit-conditions" rows="2"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="edit-isic">
                                <label for="edit-isic">Vy≈æaduje ISIC kartu</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Pr≈Ømƒõrn√° √∫spora (Kƒç)</label>
                            <input type="number" id="edit-avgSaving" min="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <button type="submit" class="btn btn-primary">üíæ Ulo≈æit zmƒõny</button>
                        <button type="button" class="btn btn-glass" onclick="closeModal('edit')">Zru≈°it</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal-overlay" id="modal-confirm">
        <div class="modal confirm-modal">
            <div class="modal-body" style="padding: 2rem;">
                <div class="confirm-icon">üóëÔ∏è</div>
                <div class="confirm-title" id="confirm-title">Smazat slevu?</div>
                <div class="confirm-message" id="confirm-message">Tato akce je nevratn√°.</div>
                <div class="confirm-buttons">
                    <button class="btn btn-glass" onclick="closeModal('confirm')">Zru≈°it</button>
                    <button class="btn btn-admin" id="confirm-btn" onclick="confirmDelete()">üóëÔ∏è Smazat</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Business Modal -->
    <div class="modal-overlay" id="modal-business">
        <div class="modal">
            <div class="modal-header">
                <h2>üè™ Pro podniky</h2>
                <button class="modal-close" onclick="closeModal('business')">√ó</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üìà</div>
                    <h3 style="font-family: 'Space Grotesk', sans-serif; margin-bottom: 0.5rem;">Z√≠skejte v√≠ce z√°kazn√≠k≈Ø</h3>
                    <p style="color: #9CA3AF;">Tis√≠ce student≈Ø hledaj√≠ slevy ka≈æd√Ω den</p>
                </div>
                
                <div class="premium-info" style="margin: 0;">
                    <h4>üíé Pr√©miov√© bal√≠ƒçky</h4>
                    <div class="premium-tiers">
                        <div class="premium-tier">
                            <div class="tier-name">üì¢ Sponzorovan√©</div>
                            <div class="tier-price">299 Kƒç <span>/mƒõs√≠c</span></div>
                            <ul class="tier-features">
                                <li>Zv√Ωraznƒõn√° karta</li>
                                <li>Vy≈°≈°√≠ pozice</li>
                                <li>Badge "Sponzorov√°no"</li>
                            </ul>
                        </div>
                        <div class="premium-tier recommended">
                            <div class="tier-name">‚≠ê Doporuƒçujeme</div>
                            <div class="tier-price">599 Kƒç <span>/mƒõs√≠c</span></div>
                            <ul class="tier-features">
                                <li>V≈°e ze Sponzorovan√©</li>
                                <li>Zlat√Ω r√°meƒçek</li>
                                <li>TOP pozice</li>
                                <li>Priorita na mapƒõ</li>
                            </ul>
                        </div>
                        <div class="premium-tier">
                            <div class="tier-name">üî• Sleva dne</div>
                            <div class="tier-price">199 Kƒç <span>/den</span></div>
                            <ul class="tier-features">
                                <li>Banner naho≈ôe</li>
                                <li>Push notifikace</li>
                                <li>Max. viditelnost</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-submit" style="margin-top: 1.5rem;" onclick="alert('Kontaktujte n√°s na business@slevy.cz')">üìß Kontaktovat n√°s</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <span id="toast-icon">‚úÖ</span>
        <span id="toast-message">Akce byla √∫spƒõ≈°n√°!</span>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Data
        let discounts = [
            { id: 1, name: "Coffee Time", address: "Velk√© n√°mƒõst√≠ 14, Hradec Kr√°lov√©", lat: 50.2093, lng: 15.8327, discount: "15%", discountValue: 15, category: "cafe", isic: true, conditions: "Na v≈°echny n√°poje kromƒõ alkoholick√Ωch", verified: true, updatedAt: "2025-01-15", rating: 4.5, ratingCount: 23, usedCount: 156, usedThisMonth: 34, avgSaving: 25, premium: 'recommended', reviews: [
                { id: 1, author: "Jan N.", rating: 5, text: "Super kav√°rna, sleva funguje bez probl√©m≈Ø!", date: "2025-01-10", helpful: 12 },
                { id: 2, author: "Petra K.", rating: 4, text: "Dobr√° k√°va, person√°l mil√Ω. Doporuƒçuji!", date: "2025-01-08", helpful: 8 }
            ]},
            { id: 2, name: "Pizza Express", address: "Goƒç√°rova t≈ô√≠da 56, Hradec Kr√°lov√©", lat: 50.2103, lng: 15.8280, discount: "10%", discountValue: 10, category: "food", isic: false, conditions: "Plat√≠ na cel√© menu", verified: true, updatedAt: "2025-01-14", rating: 4.2, ratingCount: 45, usedCount: 234, usedThisMonth: 67, avgSaving: 35, premium: 'sponsored', reviews: [] },
            { id: 3, name: "CineStar Hradec", address: "Futurum, Hradec Kr√°lov√©", lat: 50.2003, lng: 15.8160, discount: "30%", discountValue: 30, category: "entertainment", isic: true, conditions: "√öter√Ω a st≈ôeda, kromƒõ premi√©r", verified: true, updatedAt: "2025-01-13", rating: 4.8, ratingCount: 89, usedCount: 567, usedThisMonth: 123, avgSaving: 60, premium: null, reviews: [] },
            { id: 4, name: "FitGym Studio", address: "Resslova 27, Hradec Kr√°lov√©", lat: 50.2073, lng: 15.8350, discount: "20%", discountValue: 20, category: "sport", isic: true, conditions: "Na mƒõs√≠ƒçn√≠ permanentky", verified: true, updatedAt: "2025-01-12", rating: 4.3, ratingCount: 34, usedCount: 89, usedThisMonth: 21, avgSaving: 150, premium: null, reviews: [] },
            { id: 5, name: "TechShop HK", address: "Buzuluck√° 15, Hradec Kr√°lov√©", lat: 50.2050, lng: 15.8410, discount: "5-15%", discountValue: 15, category: "tech", isic: true, conditions: "Podle typu produktu", verified: true, updatedAt: "2025-01-11", rating: 3.9, ratingCount: 12, usedCount: 45, usedThisMonth: 8, avgSaving: 200, premium: null, reviews: [] },
            { id: 6, name: "Burger King", address: "Goƒç√°rova 123, Hradec Kr√°lov√©", lat: 50.2115, lng: 15.8300, discount: "10%", discountValue: 10, category: "food", isic: false, conditions: "Na menu + drink", verified: true, updatedAt: "2025-01-10", rating: 4.0, ratingCount: 67, usedCount: 345, usedThisMonth: 89, avgSaving: 25, premium: null, reviews: [] },
            { id: 7, name: "H&M", address: "Atrium HK, Hradec Kr√°lov√©", lat: 50.2088, lng: 15.8380, discount: "10%", discountValue: 10, category: "clothing", isic: true, conditions: "Nelze kombinovat s jin√Ωmi slevami", verified: true, updatedAt: "2025-01-09", rating: 4.1, ratingCount: 56, usedCount: 234, usedThisMonth: 45, avgSaving: 80, premium: 'sponsored', reviews: [] },
            { id: 8, name: "Beauty Salon Anna", address: "Posp√≠≈°ilova 8, Hradec Kr√°lov√©", lat: 50.2060, lng: 15.8295, discount: "15%", discountValue: 15, category: "beauty", isic: false, conditions: "Na z√°kladn√≠ slu≈æby", verified: true, updatedAt: "2025-01-08", rating: 4.7, ratingCount: 28, usedCount: 78, usedThisMonth: 15, avgSaving: 90, premium: null, reviews: [] },
            { id: 9, name: "Kav√°rna U Kapliƒçky", address: "Mal√© n√°mƒõst√≠ 2, Hradec Kr√°lov√©", lat: 50.2100, lng: 15.8340, discount: "20 Kƒç", discountValue: 8, category: "cafe", isic: false, conditions: "Sleva na sn√≠da≈àov√© menu", verified: true, updatedAt: "2025-01-07", rating: 4.6, ratingCount: 41, usedCount: 123, usedThisMonth: 28, avgSaving: 20, premium: null, reviews: [] },
            { id: 10, name: "Copy Centrum Plus", address: "Hradeck√° 100, Hradec Kr√°lov√©", lat: 50.2040, lng: 15.8250, discount: "25%", discountValue: 25, category: "services", isic: true, conditions: "Na ƒçernob√≠l√© kopie a tisky", verified: true, updatedAt: "2025-01-06", rating: 4.4, ratingCount: 19, usedCount: 167, usedThisMonth: 34, avgSaving: 15, premium: null, reviews: [] }
        ];

        let pendingDiscounts = [
            { id: 101, name: "Sushi Bar Sakura", address: "Dlouh√° 45, Hradec Kr√°lov√©", discount: "15%", discountValue: 15, category: "food", isic: true, conditions: "Na obƒõdov√© menu", submittedBy: "student@slevy.cz", submittedAt: "2025-01-16" },
            { id: 102, name: "Knihkupectv√≠ Fi≈°er", address: "Velk√© n√°mƒõst√≠ 8, Hradec Kr√°lov√©", discount: "10%", discountValue: 10, category: "services", isic: false, conditions: "Na v≈°echny knihy", submittedBy: "jan.novak@email.cz", submittedAt: "2025-01-15" }
        ];

        let users = [
            { email: 'student@slevy.cz', password: 'heslo123', name: 'Jan Student', role: 'student', favorites: [1, 3], usedDiscounts: [1, 2], totalSaved: 450 },
            { email: 'admin@slevy.cz', password: 'admin123', name: 'Admin', role: 'admin', favorites: [1, 2, 5], usedDiscounts: [], totalSaved: 0 }
        ];

        let currentUser = null;
        let map = null;
        let markers = [];
        let userMarker = null;
        let userLocation = null;
        let locationEnabled = false;
        let activeCategory = 'all';
        let activeTab = 'all';
        let activeAdminTab = 'pending';
        let sortBy = 'featured';
        let filterNoIsic = false;
        let pendingNavigation = null;
        let currentDetailId = null;
        let newReviewRating = 0;
        let dealOfDayId = 3;
        let onlineUsers = 23;
        let deleteTargetId = null;

        const categoryEmojis = { food: 'üçï', cafe: '‚òï', clothing: 'üëï', tech: 'üíª', beauty: 'üíÖ', sport: 'üèÉ', entertainment: 'üé¨', services: 'üõ†Ô∏è' };
        const categoryNames = { food: 'J√≠dlo', cafe: 'Kav√°rna', clothing: 'Obleƒçen√≠', tech: 'Technika', beauty: 'Kr√°sa', sport: 'Sport', entertainment: 'Z√°bava', services: 'Slu≈æby' };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initMap();
            renderDiscountList();
            updateStats();
            updateDealTimer();
            setInterval(updateDealTimer, 1000);
            setInterval(updateOnlineUsers, 30000);
        });

        // Deal timer
        function updateDealTimer() {
            const now = new Date();
            const endOfDay = new Date(now);
            endOfDay.setHours(23, 59, 59, 999);
            const diff = endOfDay - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById('deal-timer').textContent = 
                `Konƒç√≠ za ${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function updateOnlineUsers() {
            onlineUsers += Math.floor(Math.random() * 5) - 2;
            if (onlineUsers < 15) onlineUsers = 15;
            if (onlineUsers > 50) onlineUsers = 50;
            document.getElementById('online-count').textContent = onlineUsers;
        }

        // Helper functions
        function renderStars(rating) {
            const fullStars = Math.round(rating);
            return '<span class="stars">' + '‚òÖ'.repeat(fullStars) + '‚òÜ'.repeat(5 - fullStars) + '</span>';
        }

        function renderStarsInteractive(rating) {
            const fullStars = Math.round(rating);
            return '‚òÖ'.repeat(fullStars) + '‚òÜ'.repeat(5 - fullStars);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const now = new Date();
            const diff = Math.floor((now - date) / (1000 * 60 * 60 * 24));
            if (diff === 0) return 'dnes';
            if (diff === 1) return 'vƒçera';
            if (diff < 7) return `p≈ôed ${diff} dny`;
            return date.toLocaleDateString('cs-CZ');
        }

        function formatDistance(meters) {
            return meters < 1000 ? Math.round(meters) + ' m' : (meters / 1000).toFixed(1) + ' km';
        }

        function getDistance(lat1, lng1, lat2, lng2) {
            const R = 6371e3;
            const œÜ1 = lat1 * Math.PI / 180;
            const œÜ2 = lat2 * Math.PI / 180;
            const ŒîœÜ = (lat2 - lat1) * Math.PI / 180;
            const ŒîŒª = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(ŒîœÜ / 2) ** 2 + Math.cos(œÜ1) * Math.cos(œÜ2) * Math.sin(ŒîŒª / 2) ** 2;
            return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        }

        function escapeHtml(str) {
            return str.replace(/'/g, "\\'").replace(/"/g, '&quot;');
        }

        // Modal functions
        function openModal(name) {
            document.getElementById(`modal-${name}`).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(name) {
            document.getElementById(`modal-${name}`).classList.remove('active');
            document.body.style.overflow = '';
        }

        function showToast(message, type = '') {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toast-icon');
            const msg = document.getElementById('toast-message');
            
            toast.className = 'toast';
            if (type) toast.classList.add(type);
            icon.textContent = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : 'üì¢';
            msg.textContent = message;
            
            toast.classList.add('active');
            setTimeout(() => toast.classList.remove('active'), 3000);
        }

        // User functions
        function getUserFavorites() { return currentUser ? currentUser.favorites || [] : []; }
        function getUserUsedDiscounts() { return currentUser ? currentUser.usedDiscounts || [] : []; }
        function isFavorite(id) { return getUserFavorites().includes(id); }
        function hasUsedDiscount(id) { return getUserUsedDiscounts().includes(id); }

        function toggleFavorite(id, event) {
            if (event) event.stopPropagation();
            if (!currentUser) {
                showToast('Pro obl√≠ben√© se p≈ôihlas', 'error');
                openModal('login');
                return;
            }
            if (!currentUser.favorites) currentUser.favorites = [];
            const index = currentUser.favorites.indexOf(id);
            if (index > -1) {
                currentUser.favorites.splice(index, 1);
                showToast('Odebr√°no z obl√≠ben√Ωch', 'success');
            } else {
                currentUser.favorites.push(id);
                showToast('P≈ôid√°no do obl√≠ben√Ωch! ‚ù§Ô∏è', 'success');
            }
            updateFavoritesCount();
            renderDiscountList();
            renderMarkers();
            if (currentDetailId === id) showDetail(id);
        }

        function markAsUsed(id, worked) {
            if (!currentUser) {
                showToast('Pro oznaƒçen√≠ se p≈ôihlas', 'error');
                openModal('login');
                return;
            }
            if (!currentUser.usedDiscounts) currentUser.usedDiscounts = [];
            
            const discount = discounts.find(d => d.id === id);
            if (!discount) return;

            if (!currentUser.usedDiscounts.includes(id)) {
                currentUser.usedDiscounts.push(id);
                discount.usedCount++;
                discount.usedThisMonth++;
                currentUser.totalSaved = (currentUser.totalSaved || 0) + (discount.avgSaving || 30);
            }

            showToast(worked ? `Super! U≈°et≈ôil/a jsi ~${discount.avgSaving || 30} Kƒç üí∞` : 'D√≠ky za info! Provƒõ≈ô√≠me to üîç', 'success');
            updateStats();
            if (currentDetailId === id) showDetail(id);
        }

        function updateFavoritesCount() {
            const count = getUserFavorites().length;
            const tabCount = document.getElementById('tab-favorites-count');
            if (tabCount) tabCount.textContent = `(${count})`;
        }

        // Category handling
        function setCategory(cat) {
            activeCategory = cat;
            document.querySelectorAll('.category-chip').forEach(chip => {
                chip.classList.toggle('active', chip.dataset.category === cat);
            });
            renderMarkers();
            renderDiscountList();
        }

        // Reviews
        function submitReview(discountId) {
            if (!currentUser) {
                showToast('Pro hodnocen√≠ se p≈ôihlas', 'error');
                openModal('login');
                return;
            }
            if (newReviewRating === 0) {
                showToast('Vyber poƒçet hvƒõzdiƒçek', 'error');
                return;
            }
            const textarea = document.getElementById('review-text');
            const text = textarea ? textarea.value.trim() : '';
            if (text.length < 5) {
                showToast('Napi≈° alespo≈à p√°r slov', 'error');
                return;
            }
            const discount = discounts.find(d => d.id === discountId);
            if (!discount) return;
            if (!discount.reviews) discount.reviews = [];

            discount.reviews.unshift({
                id: Date.now(),
                author: currentUser.name,
                rating: newReviewRating,
                text: text,
                date: new Date().toISOString().split('T')[0],
                helpful: 0
            });

            const totalRating = discount.reviews.reduce((sum, r) => sum + r.rating, 0);
            discount.rating = Math.round((totalRating / discount.reviews.length) * 10) / 10;
            discount.ratingCount = discount.reviews.length;

            newReviewRating = 0;
            showToast('Recenze p≈ôid√°na! D√≠ky üôè', 'success');
            showDetail(discountId);
            updateStats();
        }

        function setReviewRating(rating) {
            newReviewRating = rating;
            document.querySelectorAll('.star-rating button').forEach((btn, i) => {
                btn.classList.toggle('active', i < rating);
            });
        }

        function toggleHelpful(discountId, reviewId) {
            const discount = discounts.find(d => d.id === discountId);
            if (!discount || !discount.reviews) return;
            const review = discount.reviews.find(r => r.id === reviewId);
            if (review) {
                review.helpful++;
                showDetail(discountId);
            }
        }

        // Share
        function openShareModal(id) {
            const discount = discounts.find(d => d.id === id);
            if (!discount) return;
            const shareText = `üéì Studentsk√° sleva ${discount.discount} v ${discount.name}!\nüìç ${discount.address}\n‚≠ê ${discount.rating}/5\n\nNajdi dal≈°√≠ na Studentsk√© slevy HK!`;
            const shareUrl = window.location.href;

            document.getElementById('share-content').innerHTML = `
                <div class="share-options">
                    <div class="share-option whatsapp" onclick="shareVia('whatsapp', '${encodeURIComponent(shareText)}')">
                        <div class="icon">üí¨</div>
                        <div class="label">WhatsApp</div>
                    </div>
                    <div class="share-option facebook" onclick="shareVia('facebook', '${encodeURIComponent(shareUrl)}')">
                        <div class="icon">üìò</div>
                        <div class="label">Facebook</div>
                    </div>
                    <div class="share-option twitter" onclick="shareVia('twitter', '${encodeURIComponent(shareText)}')">
                        <div class="icon">üê¶</div>
                        <div class="label">Twitter</div>
                    </div>
                    <div class="share-option copy" onclick="copyShareLink('${escapeHtml(discount.name)}', '${discount.discount}')">
                        <div class="icon">üìã</div>
                        <div class="label">Kop√≠rovat</div>
                    </div>
                </div>
                <div class="share-preview">
                    <div class="share-preview-title">N√°hled:</div>
                    <div class="share-preview-content">
                        üéì <strong>${discount.discount}</strong> v ${discount.name}!<br>
                        üìç ${discount.address}<br>
                        ‚≠ê ${discount.rating}/5 ‚Ä¢ ‚úì ${discount.usedCount}√ó vyu≈æito
                    </div>
                </div>
            `;
            openModal('share');
        }

        function shareVia(platform, text) {
            let url;
            switch (platform) {
                case 'whatsapp': url = `https://wa.me/?text=${text}`; break;
                case 'facebook': url = `https://www.facebook.com/sharer/sharer.php?u=${text}`; break;
                case 'twitter': url = `https://twitter.com/intent/tweet?text=${text}`; break;
            }
            window.open(url, '_blank', 'width=600,height=400');
        }

        function copyShareLink(name, discount) {
            navigator.clipboard.writeText(`üéì Sleva ${discount} v ${name}! Najdi dal≈°√≠ na Studentsk√© slevy HK`);
            showToast('Zkop√≠rov√°no! üìã', 'success');
        }

        // Navigation
        function getNavigationUrl(app, lat, lng) {
            const urls = {
                google: `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`,
                waze: `https://waze.com/ul?ll=${lat},${lng}&navigate=yes`,
                apple: `https://maps.apple.com/?daddr=${lat},${lng}&dirflg=d`,
                mapy: `https://mapy.cz/zakladni?x=${lng}&y=${lat}&z=17`
            };
            return urls[app] || urls.google;
        }

        function openNavigationModal(lat, lng, name, address) {
            const saved = localStorage.getItem('preferredNavigation');
            if (saved) {
                window.open(getNavigationUrl(saved, lat, lng), '_blank');
                return;
            }
            pendingNavigation = { lat, lng };
            document.getElementById('nav-place-name').textContent = name;
            document.getElementById('nav-place-address').textContent = address;
            openModal('navigation');
        }

        function navigateWithChoice(app) {
            if (!pendingNavigation) return;
            if (document.getElementById('remember-nav-choice').checked) {
                localStorage.setItem('preferredNavigation', app);
            }
            window.open(getNavigationUrl(app, pendingNavigation.lat, pendingNavigation.lng), '_blank');
            closeModal('navigation');
            pendingNavigation = null;
        }

        // Geolocation
        function enableLocation() {
            if (!navigator.geolocation) {
                showToast('Geolokace nen√≠ podporov√°na', 'error');
                return;
            }
            document.getElementById('center-user-btn').classList.add('loading');
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    userLocation = { lat: pos.coords.latitude, lng: pos.coords.longitude };
                    locationEnabled = true;
                    document.getElementById('center-user-btn').classList.remove('loading');
                    document.getElementById('center-user-btn').classList.add('active');
                    document.getElementById('location-banner').classList.add('active');
                    addUserMarker();
                    calculateDistances();
                    renderMarkers();
                    renderDiscountList();
                    map.flyTo([userLocation.lat, userLocation.lng], 15);
                    showToast('Poloha aktivov√°na! üìç', 'success');
                },
                () => {
                    document.getElementById('center-user-btn').classList.remove('loading');
                    showToast('Nepoda≈ôilo se zjistit polohu', 'error');
                },
                { enableHighAccuracy: true, timeout: 10000 }
            );
        }

        function disableLocation() {
            locationEnabled = false;
            userLocation = null;
            document.getElementById('center-user-btn').classList.remove('active');
            document.getElementById('location-banner').classList.remove('active');
            if (userMarker) { map.removeLayer(userMarker); userMarker = null; }
            discounts.forEach(d => d.distance = null);
            renderMarkers();
            renderDiscountList();
        }

        function addUserMarker() {
            if (userMarker) map.removeLayer(userMarker);
            userMarker = L.marker([userLocation.lat, userLocation.lng], {
                icon: L.divIcon({
                    className: 'user-loc',
                    html: '<div style="position:relative"><div class="user-location-pulse"></div><div class="user-location-marker"></div></div>',
                    iconSize: [20, 20], iconAnchor: [10, 10]
                })
            }).addTo(map).bindPopup('<strong>üìç Ty jsi tady</strong>');
        }

        function calculateDistances() {
            if (!userLocation) return;
            discounts.forEach(d => {
                d.distance = getDistance(userLocation.lat, userLocation.lng, d.lat, d.lng);
            });
        }

        // Map
        function initMap() {
            map = L.map('map').setView([50.2093, 15.8327], 14);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '¬© OpenStreetMap', maxZoom: 19
            }).addTo(map);
            renderMarkers();
        }

        function createCustomIcon(category, isFav, premium) {
            let borderColor = isFav ? '#F472B6' : 'white';
            let bgGradient = 'linear-gradient(135deg, #8B5CF6, #F472B6)';
            
            if (premium === 'recommended') {
                borderColor = '#FFD700';
                bgGradient = 'linear-gradient(135deg, #FFD700, #FFA500)';
            } else if (premium === 'sponsored') {
                borderColor = '#3B82F6';
            }
            
            return L.divIcon({
                className: 'custom-icon',
                html: `<div style="background:${bgGradient};width:36px;height:36px;border-radius:50% 50% 50% 0;transform:rotate(-45deg);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(139,92,246,0.5);border:3px solid ${borderColor}"><span style="transform:rotate(45deg);font-size:16px">${categoryEmojis[category] || 'üìç'}</span></div>`,
                iconSize: [36, 36], iconAnchor: [18, 36], popupAnchor: [0, -36]
            });
        }

        function renderMarkers() {
            markers.forEach(m => map.removeLayer(m));
            markers = [];

            filterDiscounts().forEach(d => {
                const marker = L.marker([d.lat, d.lng], { icon: createCustomIcon(d.category, isFavorite(d.id), d.premium) }).addTo(map);
                const distHtml = d.distance ? `<div style="display:inline-flex;align-items:center;gap:0.25rem;background:rgba(59,130,246,0.2);color:#3B82F6;padding:0.2rem 0.6rem;border-radius:50px;font-size:0.8rem;margin-top:0.5rem">üìç ${formatDistance(d.distance)}</div>` : '';
                const premiumBadge = d.premium === 'recommended' ? '<span style="background:linear-gradient(135deg,#FFD700,#FFA500);color:#111;padding:0.15rem 0.5rem;border-radius:4px;font-size:0.7rem;font-weight:600;margin-left:0.5rem">‚≠ê TOP</span>' : d.premium === 'sponsored' ? '<span style="background:linear-gradient(135deg,#3B82F6,#8B5CF6);color:white;padding:0.15rem 0.5rem;border-radius:4px;font-size:0.7rem;margin-left:0.5rem">üì¢</span>' : '';
                
                marker.bindPopup(`
                    <div class="popup-content">
                        <div class="popup-header">
                            <h3>${d.name}${premiumBadge}</h3>
                            <button class="popup-favorite-btn" onclick="toggleFavorite(${d.id})">${isFavorite(d.id) ? '‚ù§Ô∏è' : 'ü§ç'}</button>
                        </div>
                        <div class="popup-discount">${d.discount}</div>
                        <div class="popup-rating">${renderStars(d.rating)} <span class="rating-count">${d.rating} (${d.ratingCount})</span></div>
                        <p class="popup-meta">${categoryEmojis[d.category]} ${categoryNames[d.category]}${d.isic ? ' ‚Ä¢ ISIC' : ''}</p>
                        ${distHtml}
                        <div class="popup-stats">
                            <div class="popup-stat used">‚úì ${d.usedCount}√ó vyu≈æito</div>
                            <div class="popup-stat">üí∞ ~${d.avgSaving} Kƒç √∫spora</div>
                        </div>
                        <div class="popup-buttons">
                            <button class="popup-btn popup-btn-nav" onclick="openNavigationModal(${d.lat},${d.lng},'${escapeHtml(d.name)}','${escapeHtml(d.address)}')">üß≠</button>
                            <button class="popup-btn popup-btn-detail" onclick="showDetail(${d.id})">üìã</button>
                            <button class="popup-btn popup-btn-share" onclick="openShareModal(${d.id})">üì§</button>
                        </div>
                    </div>
                `, { className: 'custom-popup' });

                marker.on('click', () => map.flyTo([d.lat, d.lng], 17, { duration: 0.5 }));
                markers.push(marker);
            });
        }

        function fitAllMarkers() {
            if (markers.length === 0) return;
            const group = new L.featureGroup(markers);
            if (userMarker) group.addLayer(userMarker);
            map.fitBounds(group.getBounds().pad(0.1));
        }

        // Filtering & Sorting
        function filterDiscounts() {
            const search = document.getElementById('search-input').value.toLowerCase();
            return discounts.filter(d => {
                const matchCat = activeCategory === 'all' || d.category === activeCategory;
                const matchSearch = d.name.toLowerCase().includes(search) || d.address.toLowerCase().includes(search);
                const matchIsic = !filterNoIsic || !d.isic;
                return matchCat && matchSearch && matchIsic && d.verified;
            });
        }

        function sortDiscounts(list) {
            const sorted = [...list];
            const recommended = sorted.filter(d => d.premium === 'recommended');
            const sponsored = sorted.filter(d => d.premium === 'sponsored');
            const regular = sorted.filter(d => !d.premium);

            switch (sortBy) {
                case 'featured': regular.sort((a, b) => b.rating - a.rating); break;
                case 'rating': regular.sort((a, b) => b.rating - a.rating); break;
                case 'popular': regular.sort((a, b) => b.usedCount - a.usedCount); break;
                case 'discount': regular.sort((a, b) => b.discountValue - a.discountValue); break;
                case 'distance': 
                    if (locationEnabled) {
                        return [...sorted].sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity));
                    }
                    break;
                case 'newest': regular.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt)); break;
            }

            return [...recommended, ...sponsored, ...regular];
        }

        function handleSort() {
            sortBy = document.getElementById('sort-select').value;
            if (sortBy === 'distance' && !locationEnabled) {
                enableLocation();
                return;
            }
            renderDiscountList();
        }

        function handleSearch() {
            renderMarkers();
            renderDiscountList();
        }

        function toggleNoIsicFilter() {
            filterNoIsic = !filterNoIsic;
            document.getElementById('filter-no-isic').classList.toggle('active', filterNoIsic);
            renderMarkers();
            renderDiscountList();
        }

        function switchTab(tab) {
            if (tab === 'favorites' && !currentUser) {
                showToast('Pro obl√≠ben√© se p≈ôihlas', 'error');
                openModal('login');
                return;
            }
            activeTab = tab;
            document.querySelectorAll('.list-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');
            renderDiscountList();
        }

        function toggleView(view) {
            const container = document.getElementById('map-container');
            document.getElementById('view-map-btn').classList.toggle('active', view === 'map');
            document.getElementById('view-list-btn').classList.toggle('active', view === 'list');
            container.classList.toggle('show-list', view === 'list');
        }

        // Render discount list
        function renderDiscountList() {
            const list = document.getElementById('discount-list');
            let filtered = filterDiscounts();
            
            if (activeTab === 'favorites') {
                filtered = filtered.filter(d => isFavorite(d.id));
            }
            
            filtered = sortDiscounts(filtered);
            document.getElementById('list-count').textContent = filtered.length;
            
            if (filtered.length === 0) {
                list.innerHTML = `<div class="empty-state"><div class="icon">${activeTab === 'favorites' ? '‚ù§Ô∏è' : 'üîç'}</div><h4>${activeTab === 'favorites' ? '≈Ω√°dn√© obl√≠ben√©' : 'Nic nenalezeno'}</h4><p>${activeTab === 'favorites' ? 'P≈ôidej slevy do obl√≠ben√Ωch' : 'Zkus zmƒõnit filtry'}</p></div>`;
                return;
            }

            list.innerHTML = filtered.map(d => {
                const premiumClass = d.premium === 'recommended' ? 'premium' : d.premium === 'sponsored' ? 'sponsored' : '';
                const favClass = isFavorite(d.id) ? 'favorite' : '';
                
                return `
                <div class="discount-card ${premiumClass} ${favClass}" onclick="showDetail(${d.id})">
                    <div class="discount-card-header">
                        <div class="discount-card-title">
                            <h4>${d.name}</h4>
                            <div class="discount-card-rating">${renderStars(d.rating)} <span class="rating-text">${d.rating} (${d.ratingCount})</span></div>
                        </div>
                        <button class="favorite-btn" onclick="toggleFavorite(${d.id}, event)">${isFavorite(d.id) ? '‚ù§Ô∏è' : 'ü§ç'}</button>
                        <span class="discount-badge">${d.discount}</span>
                    </div>
                    <div class="discount-card-meta">
                        <span class="discount-card-category">${categoryEmojis[d.category]} ${categoryNames[d.category]}</span>
                        ${d.distance ? `<span class="distance-badge">üìç ${formatDistance(d.distance)}</span>` : ''}
                        <span class="used-badge">‚úì ${d.usedCount}√ó</span>
                    </div>
                    <div class="discount-card-info">
                        ${d.isic ? '<span class="isic-badge">ISIC</span>' : ''}
                        <span class="verified-badge">‚úì Ovƒõ≈ôeno</span>
                        <span style="color: var(--accent)">~${d.avgSaving} Kƒç √∫spora</span>
                    </div>
                    <div class="discount-card-actions">
                        <button class="card-btn card-btn-nav" onclick="event.stopPropagation(); openNavigationModal(${d.lat},${d.lng},'${escapeHtml(d.name)}','${escapeHtml(d.address)}')">üß≠ Jet</button>
                        <button class="card-btn card-btn-detail" onclick="event.stopPropagation(); showDetail(${d.id})">üìã Detail</button>
                        <button class="card-btn card-btn-share" onclick="event.stopPropagation(); openShareModal(${d.id})">üì§</button>
                    </div>
                </div>
            `}).join('');
        }

        // Detail modal
        function showDetail(id) {
            currentDetailId = id;
            const d = discounts.find(x => x.id === id);
            if (!d) return;

            const hasUsed = hasUsedDiscount(id);
            const distInfo = d.distance ? `<p style="color:#3B82F6;margin-top:0.5rem">üìç ${formatDistance(d.distance)} od tebe</p>` : '';
            const premiumBadge = d.premium === 'recommended' ? '<span style="background:linear-gradient(135deg,#FFD700,#FFA500);color:#111;padding:0.25rem 0.75rem;border-radius:50px;font-size:0.8rem;font-weight:600;display:inline-block;margin-top:0.5rem">‚≠ê DOPORUƒåUJEME</span>' : d.premium === 'sponsored' ? '<span style="background:linear-gradient(135deg,#3B82F6,#8B5CF6);color:white;padding:0.25rem 0.75rem;border-radius:50px;font-size:0.8rem;display:inline-block;margin-top:0.5rem">üì¢ Sponzorov√°no</span>' : '';

            const usedSection = hasUsed ? `
                <div class="already-used"><div class="icon">‚úÖ</div><p>Tuto slevu jsi ji≈æ vyu≈æil/a!</p></div>
            ` : `
                <div class="used-question">
                    <h4>Vyu≈æil/a jsi tuto slevu?</h4>
                    <p>Pomoz ostatn√≠m - dej n√°m vƒõdƒõt!</p>
                </div>
                <div class="used-buttons">
                    <button class="used-btn used-btn-yes" onclick="markAsUsed(${id}, true)">üëç Ano, funguje!</button>
                    <button class="used-btn used-btn-no" onclick="markAsUsed(${id}, false)">üëé Nefungovala</button>
                </div>
            `;

            const reviewsHtml = (d.reviews || []).map(r => `
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-author">
                            <div class="review-avatar">${r.author.charAt(0)}</div>
                            <div><div class="review-name">${r.author}</div><div class="review-date">${formatDate(r.date)}</div></div>
                        </div>
                        <div class="review-stars">${renderStarsInteractive(r.rating)}
</div>
                    </div>
                    <div class="review-text">${r.text}</div>
                    <div class="review-helpful"><button onclick="toggleHelpful(${id}, ${r.id})">üëç U≈æiteƒçn√© (${r.helpful})</button></div>
                </div>
            `).join('') || '<p style="color:#9CA3AF;text-align:center;padding:1rem">Zat√≠m ≈æ√°dn√© recenze. Buƒè prvn√≠!</p>';

            const addReviewHtml = currentUser ? `
                <div class="add-review">
                    <h5>‚úçÔ∏è Napi≈° recenzi</h5>
                    <div class="star-rating">${[1,2,3,4,5].map(i => `<button type="button" onclick="setReviewRating(${i})">‚òÖ</button>`).join('')}</div>
                    <textarea id="review-text" class="review-textarea" placeholder="Jak√° byla tvoje zku≈°enost?"></textarea>
                    <button class="btn btn-primary btn-sm" onclick="submitReview(${id})">üì§ Odeslat</button>
                </div>
            ` : `<p style="text-align:center;color:#9CA3AF;padding:1rem"><a href="#" onclick="openModal('login');closeModal('detail');return false" style="color:var(--primary)">P≈ôihlas se</a> pro psan√≠ recenz√≠</p>`;

            document.getElementById('detail-title').textContent = d.name;
            document.getElementById('detail-content').innerHTML = `
                <div class="detail-hero">
                    <div class="emoji">${categoryEmojis[d.category]}</div>
                    <span class="discount-badge">${d.discount}</span>
                    ${premiumBadge}
                    <div class="detail-rating">
                        <span class="stars stars-large">${renderStarsInteractive(d.rating)}</span>
                        <div class="rating-info"><div class="rating-value">${d.rating}/5</div><div class="rating-count">${d.ratingCount} hodnocen√≠</div></div>
                    </div>
                    <div class="detail-stats">
                        <div class="detail-stat"><div class="value">${d.usedCount}</div><div class="label">vyu≈æito</div></div>
                        <div class="detail-stat"><div class="value">~${d.avgSaving} Kƒç</div><div class="label">√∫spora</div></div>
                        <div class="detail-stat"><div class="value">${d.usedThisMonth}</div><div class="label">tento mƒõs√≠c</div></div>
                    </div>
                </div>
                <div class="detail-section"><div class="detail-section-title">üìç Adresa</div><div class="detail-section-content">${d.address}</div>${distInfo}</div>
                <div class="detail-section"><div class="detail-section-title">üí≥ Podm√≠nky</div><div class="detail-section-content">${d.conditions || 'Bez podm√≠nek'}</div>${d.isic ? '<span class="isic-badge" style="margin-top:0.5rem;display:inline-block">Vy≈æaduje ISIC</span>' : ''}</div>
                <div class="detail-actions">
                    <button class="btn btn-primary" onclick="closeModal('detail');openNavigationModal(${d.lat},${d.lng},'${escapeHtml(d.name)}','${escapeHtml(d.address)}')">üß≠ Navigovat</button>
                    <button class="btn btn-glass" onclick="toggleFavorite(${id})">${isFavorite(id) ? '‚ù§Ô∏è V obl√≠ben√Ωch' : 'ü§ç P≈ôidat'}</button>
                    <button class="btn btn-glass btn-full" onclick="closeModal('detail');openShareModal(${id})">üì§ Sd√≠let slevu</button>
                </div>
                <div class="used-section">${usedSection}</div>
                <div class="reviews-section">
                    <div class="reviews-header"><h4>üí¨ Recenze (${(d.reviews || []).length})</h4></div>
                    ${reviewsHtml}
                    ${addReviewHtml}
                </div>
            `;
            newReviewRating = 0;
            openModal('detail');
        }

        // Stats
        function updateStats() {
            const verifiedDiscounts = discounts.filter(d => d.verified);
            document.getElementById('total-discounts').textContent = verifiedDiscounts.length;
            if (document.getElementById('total-discounts-admin')) {
                document.getElementById('total-discounts-admin').textContent = verifiedDiscounts.length;
            }
            const todayUsed = discounts.reduce((sum, d) => sum + Math.floor(d.usedThisMonth / 30), 0);
            document.getElementById('total-used').textContent = todayUsed || Math.floor(Math.random() * 20) + 10;
            const avgRating = (discounts.reduce((sum, d) => sum + d.rating, 0) / discounts.length).toFixed(1);
            document.getElementById('avg-rating').textContent = avgRating;
            
            // Premium count
            const premiumCount = discounts.filter(d => d.premium).length;
            if (document.getElementById('premium-count')) {
                document.getElementById('premium-count').textContent = premiumCount;
            }
        }

        // Auth
        function handleLogin(e) {
            e.preventDefault();
            const email = e.target.email.value;
            const password = e.target.password.value;
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = { ...user };
                closeModal('login');
                showToast(`V√≠tej, ${user.name}! üéì`, 'success');
                updateNavButtonsLoggedIn();
                updateFavoritesCount();
                
                if (user.role === 'admin') {
                    document.getElementById('admin-section').style.display = 'block';
                    renderPendingList();
                    renderAdminDiscounts();
                    renderCategoryGrid();
                    renderPremiumList();
                }
                
                renderMarkers();
                renderDiscountList();
            } else {
                showToast('Nespr√°vn√© √∫daje', 'error');
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = e.target.name.value;
            const email = e.target.email.value;
            const password = e.target.password.value;
            
            if (users.find(u => u.email === email)) {
                showToast('Email ji≈æ existuje', 'error');
                return;
            }
            
            const newUser = { email, password, name, role: 'student', favorites: [], usedDiscounts: [], totalSaved: 0 };
            users.push(newUser);
            currentUser = { ...newUser };
            
            closeModal('register');
            showToast(`V√≠tej, ${name}! üéâ`, 'success');
            updateNavButtonsLoggedIn();
        }

        function updateNavButtonsLoggedIn() {
            document.getElementById('nav-buttons').innerHTML = `
                <button class="btn btn-favorite" onclick="switchTab('favorites')">‚ù§Ô∏è <span>${getUserFavorites().length}</span></button>
                <div class="user-info"><div class="user-avatar">${currentUser.role === 'admin' ? 'üëë' : 'üéì'}</div><span>${currentUser.name}</span></div>
                ${currentUser.role === 'admin' ? '<button class="btn btn-admin btn-icon" onclick="document.getElementById(\'admin-section\').scrollIntoView({behavior:\'smooth\'})" title="Admin">‚öôÔ∏è</button>' : ''}
                <button class="btn btn-glass btn-icon" onclick="logout()" title="Odhl√°sit">üö™</button>
                <button class="btn btn-primary" onclick="openModal('add')">‚ûï</button>
            `;
        }

        function logout() {
            currentUser = null;
            document.getElementById('admin-section').style.display = 'none';
            document.getElementById('nav-buttons').innerHTML = `
                <button class="btn btn-glass" onclick="openModal('login')">üë§ P≈ôihl√°sit</button>
                <button class="btn btn-primary" onclick="openModal('add')">‚ûï P≈ôidat</button>
            `;
            activeTab = 'all';
            document.querySelectorAll('.list-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-all').classList.add('active');
            renderMarkers();
            renderDiscountList();
            showToast('Odhl√°≈°eno üëã', 'success');
        }

        // Submit discount (user)
        function submitDiscount(e) {
            e.preventDefault();
            const form = e.target;
            const newPending = {
                id: Date.now(),
                name: form.name.value,
                address: form.address.value,
                discount: form.discount.value,
                discountValue: parseInt(form.discount.value) || 10,
                category: form.category.value,
                isic: form.isic.checked,
                conditions: form.conditions.value,
                submittedBy: currentUser ? currentUser.email : 'anonym',
                submittedAt: new Date().toISOString().split('T')[0]
            };
            
            pendingDiscounts.push(newPending);
            closeModal('add');
            showToast('Sleva odesl√°na ke schv√°len√≠! üöÄ', 'success');
            form.reset();
            
            if (currentUser && currentUser.role === 'admin') {
                renderPendingList();
            }
        }

        // ==================== ADMIN FUNCTIONS ====================

        // Switch admin tabs
        function switchAdminTab(tab) {
            activeAdminTab = tab;
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`admin-tab-${tab}`).classList.add('active');
            document.querySelectorAll('.admin-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(`admin-panel-${tab}`).classList.add('active');
            
            // Refresh content
            if (tab === 'pending') renderPendingList();
            if (tab === 'all') renderAdminDiscounts();
            if (tab === 'categories') renderCategoryGrid();
            if (tab === 'premium') renderPremiumList();
        }

        // Render pending list
        function renderPendingList() {
            const list = document.getElementById('pending-list');
            document.getElementById('pending-count').textContent = pendingDiscounts.length;
            document.getElementById('pending-badge').textContent = pendingDiscounts.length;
            
            if (pendingDiscounts.length === 0) {
                list.innerHTML = '<p style="color:#9CA3AF;text-align:center;padding:2rem">‚ú® ≈Ω√°dn√© slevy neƒçekaj√≠ na schv√°len√≠</p>';
                return;
            }

            list.innerHTML = pendingDiscounts.map(d => `
                <div class="pending-item">
                    <div class="pending-header">
                        <div class="pending-info">
                            <h4>${d.name} - ${d.discount}</h4>
                            <p>${d.address}</p>
                        </div>
                    </div>
                    <div class="pending-meta">
                        <span>${categoryEmojis[d.category]} ${categoryNames[d.category]}</span>
                        <span>${d.isic ? 'üéì ISIC' : 'üÜì Bez ISIC'}</span>
                        <span>üìß ${d.submittedBy}</span>
                        <span>üìÖ ${formatDate(d.submittedAt)}</span>
                    </div>
                    <p style="font-size:0.85rem;color:#D1D5DB;margin-bottom:0.75rem">${d.conditions || 'Bez podm√≠nek'}</p>
                    <div class="pending-actions">
                        <button class="btn btn-approve btn-sm" onclick="approveDiscount(${d.id})">‚úì Schv√°lit</button>
                        <button class="btn btn-sm btn-premium-set" onclick="approveDiscount(${d.id}, 'sponsored')">üì¢ + Sponzorovan√©</button>
                        <button class="btn btn-sm btn-premium-set" onclick="approveDiscount(${d.id}, 'recommended')">‚≠ê + Doporuƒçujeme</button>
                        <button class="btn btn-reject btn-sm" onclick="rejectDiscount(${d.id})">‚úó Zam√≠tnout</button>
                    </div>
                </div>
            `).join('');
        }

        // Approve discount
        function approveDiscount(id, premiumTier = null) {
            const index = pendingDiscounts.findIndex(d => d.id === id);
            if (index === -1) return;

            const pending = pendingDiscounts[index];
            const newDiscount = {
                ...pending,
                id: Date.now(),
                lat: 50.2093 + (Math.random() - 0.5) * 0.02,
                lng: 15.8327 + (Math.random() - 0.5) * 0.02,
                verified: true,
                rating: 4.0,
                ratingCount: 0,
                usedCount: 0,
                usedThisMonth: 0,
                avgSaving: Math.round(pending.discountValue * 3),
                premium: premiumTier,
                reviews: [],
                updatedAt: new Date().toISOString().split('T')[0]
            };

            discounts.push(newDiscount);
            pendingDiscounts.splice(index, 1);

            renderPendingList();
            renderAdminDiscounts();
            renderPremiumList();
            renderMarkers();
            renderDiscountList();
            updateStats();
            showToast(`Sleva schv√°lena!${premiumTier ? ' (' + (premiumTier === 'recommended' ? '‚≠ê Doporuƒçujeme' : 'üì¢ Sponzorovan√©') + ')' : ''} ‚úÖ`, 'success');
        }

        // Reject discount
        function rejectDiscount(id) {
            const index = pendingDiscounts.findIndex(d => d.id === id);
            if (index !== -1) {
                pendingDiscounts.splice(index, 1);
                renderPendingList();
                showToast('Sleva zam√≠tnuta', 'error');
            }
        }

        // Render admin discounts table
        function renderAdminDiscounts() {
            const searchTerm = document.getElementById('admin-search')?.value.toLowerCase() || '';
            const categoryFilter = document.getElementById('admin-category-filter')?.value || 'all';
            const statusFilter = document.getElementById('admin-status-filter')?.value || 'all';

            let filtered = discounts.filter(d => {
                const matchSearch = d.name.toLowerCase().includes(searchTerm) || d.address.toLowerCase().includes(searchTerm);
                const matchCategory = categoryFilter === 'all' || d.category === categoryFilter;
                let matchStatus = true;
                if (statusFilter === 'recommended') matchStatus = d.premium === 'recommended';
                else if (statusFilter === 'sponsored') matchStatus = d.premium === 'sponsored';
                else if (statusFilter === 'normal') matchStatus = !d.premium;
                return matchSearch && matchCategory && matchStatus && d.verified;
            });

            // Desktop table
            const tableBody = document.getElementById('admin-table-body');
            if (tableBody) {
                tableBody.innerHTML = filtered.map(d => `
                    <tr>
                        <td>
                            <div class="table-name">
                                <div class="table-emoji">${categoryEmojis[d.category]}</div>
                                <div class="table-info">
                                    <h4>${d.name}</h4>
                                    <span>${d.address.substring(0, 30)}...</span>
                                </div>
                            </div>
                        </td>
                        <td>${categoryNames[d.category]}</td>
                        <td><strong>${d.discount}</strong></td>
                        <td>
                            <span class="table-badge ${d.premium === 'recommended' ? 'premium' : d.premium === 'sponsored' ? 'sponsored' : 'normal'}">
                                ${d.premium === 'recommended' ? '‚≠ê Doporuƒçujeme' : d.premium === 'sponsored' ? 'üì¢ Sponzorovan√©' : 'üìç Bƒõ≈æn√°'}
                            </span>
                        </td>
                        <td>${renderStars(d.rating)} ${d.rating}</td>
                        <td>
                            <div class="table-actions">
                                <button class="table-btn table-btn-edit" onclick="openEditModal(${d.id})" title="Upravit">‚úèÔ∏è</button>
                                <button class="table-btn table-btn-star" onclick="togglePremiumStatus(${d.id})" title="Premium status">‚≠ê</button>
                                <button class="table-btn table-btn-delete" onclick="openDeleteConfirm(${d.id})" title="Smazat">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            // Mobile cards
            const mobileCards = document.getElementById('admin-cards-mobile');
            if (mobileCards) {
                mobileCards.innerHTML = filtered.map(d => `
                    <div class="admin-discount-card ${d.premium === 'recommended' ? 'premium-card' : d.premium === 'sponsored' ? 'sponsored-card' : ''}">
                        <div class="admin-card-header">
                            <div class="admin-card-title">
                                <span style="font-size:1.5rem">${categoryEmojis[d.category]}</span>
                                <h4>${d.name}</h4>
                            </div>
                            <span class="discount-badge">${d.discount}</span>
                        </div>
                        <div class="admin-card-meta">
                            <span class="table-badge ${d.premium === 'recommended' ? 'premium' : d.premium === 'sponsored' ? 'sponsored' : 'normal'}">
                                ${d.premium === 'recommended' ? '‚≠ê Doporuƒçujeme' : d.premium === 'sponsored' ? 'üì¢ Sponzorovan√©' : 'üìç Bƒõ≈æn√°'}
                            </span>
                            <span style="color:#9CA3AF;font-size:0.8rem">${renderStars(d.rating)} ${d.rating}</span>
                        </div>
                        <p style="font-size:0.85rem;color:#9CA3AF;margin-bottom:0.75rem">${d.address}</p>
                        <div class="admin-card-actions">
                            <button class="admin-action-btn edit" onclick="openEditModal(${d.id})">‚úèÔ∏è Upravit</button>
                            <button class="admin-action-btn ${d.premium === 'recommended' ? 'remove-status' : 'premium-btn'}" onclick="setDiscountPremium(${d.id}, '${d.premium === 'recommended' ? '' : 'recommended'}')">
                                ${d.premium === 'recommended' ? '‚ûñ Odebrat ‚≠ê' : '‚≠ê Doporuƒçit'}
                            </button>
                            <button class="admin-action-btn ${d.premium === 'sponsored' ? 'remove-status' : 'sponsored-btn'}" onclick="setDiscountPremium(${d.id}, '${d.premium === 'sponsored' ? '' : 'sponsored'}')">
                                ${d.premium === 'sponsored' ? '‚ûñ Odebrat üì¢' : 'üì¢ Sponzor'}
                            </button>
                            <button class="admin-action-btn delete" onclick="openDeleteConfirm(${d.id})">üóëÔ∏è Smazat</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function filterAdminDiscounts() {
            renderAdminDiscounts();
        }

        // Edit modal
        function openEditModal(id) {
            const d = discounts.find(x => x.id === id);
            if (!d) return;

            document.getElementById('edit-id').value = d.id;
            document.getElementById('edit-name').value = d.name;
            document.getElementById('edit-discount').value = d.discount;
            document.getElementById('edit-address').value = d.address;
            document.getElementById('edit-category').value = d.category;
            document.getElementById('edit-premium').value = d.premium || '';
            document.getElementById('edit-discountValue').value = d.discountValue || '';
            document.getElementById('edit-lat').value = d.lat;
            document.getElementById('edit-lng').value = d.lng;
            document.getElementById('edit-conditions').value = d.conditions || '';
            document.getElementById('edit-isic').checked = d.isic;
            document.getElementById('edit-avgSaving').value = d.avgSaving || '';

            openModal('edit');
        }

        function saveEditDiscount(e) {
            e.preventDefault();
            const id = parseInt(document.getElementById('edit-id').value);
            const discount = discounts.find(d => d.id === id);
            if (!discount) return;

            discount.name = document.getElementById('edit-name').value;
            discount.discount = document.getElementById('edit-discount').value;
            discount.address = document.getElementById('edit-address').value;
            discount.category = document.getElementById('edit-category').value;
            discount.premium = document.getElementById('edit-premium').value || null;
            discount.discountValue = parseInt(document.getElementById('edit-discountValue').value) || 10;
            discount.lat = parseFloat(document.getElementById('edit-lat').value) || discount.lat;
            discount.lng = parseFloat(document.getElementById('edit-lng').value) || discount.lng;
            discount.conditions = document.getElementById('edit-conditions').value;
            discount.isic = document.getElementById('edit-isic').checked;
            discount.avgSaving = parseInt(document.getElementById('edit-avgSaving').value) || 30;
            discount.updatedAt = new Date().toISOString().split('T')[0];

            closeModal('edit');
            renderAdminDiscounts();
            renderPremiumList();
            renderMarkers();
            renderDiscountList();
            updateStats();
            showToast('Sleva byla upravena! ‚úÖ', 'success');
        }

        // Delete confirmation
        function openDeleteConfirm(id) {
            deleteTargetId = id;
            const d = discounts.find(x => x.id === id);
            if (!d) return;
            
            document.getElementById('confirm-title').textContent = `Smazat "${d.name}"?`;
            document.getElementById('confirm-message').textContent = 'Tato akce je nevratn√°. Sleva bude trvale odstranƒõna.';
            openModal('confirm');
        }

        function confirmDelete() {
            if (!deleteTargetId) return;
            
            const index = discounts.findIndex(d => d.id === deleteTargetId);
            if (index !== -1) {
                const name = discounts[index].name;
                discounts.splice(index, 1);
                closeModal('confirm');
                renderAdminDiscounts();
                renderPremiumList();
                renderCategoryGrid();
                renderMarkers();
                renderDiscountList();
                updateStats();
                showToast(`"${name}" byla smaz√°na üóëÔ∏è`, 'success');
            }
            deleteTargetId = null;
        }

        // Premium status toggle
        function togglePremiumStatus(id) {
            const d = discounts.find(x => x.id === id);
            if (!d) return;
            
            // Cycle through: null -> sponsored -> recommended -> null
            if (!d.premium) {
                d.premium = 'sponsored';
                showToast(`${d.name} je nyn√≠ sponzorovan√° üì¢`, 'success');
            } else if (d.premium === 'sponsored') {
                d.premium = 'recommended';
                showToast(`${d.name} je nyn√≠ doporuƒçen√° ‚≠ê`, 'success');
            } else {
                d.premium = null;
                showToast(`${d.name} je nyn√≠ bƒõ≈æn√° sleva`, 'success');
            }
            
            renderAdminDiscounts();
            renderPremiumList();
            renderMarkers();
            renderDiscountList();
            updateStats();
        }

        function setDiscountPremium(id, premium) {
            const d = discounts.find(x => x.id === id);
            if (!d) return;
            
            d.premium = premium || null;
            
            if (premium === 'recommended') {
                showToast(`${d.name} je nyn√≠ doporuƒçen√° ‚≠ê`, 'success');
            } else if (premium === 'sponsored') {
                showToast(`${d.name} je nyn√≠ sponzorovan√° üì¢`, 'success');
            } else {
                showToast(`${d.name} je nyn√≠ bƒõ≈æn√° sleva`, 'success');
            }
            
            renderAdminDiscounts();
            renderPremiumList();
            renderMarkers();
            renderDiscountList();
            updateStats();
        }

        // Admin add discount directly
        function adminAddDiscount(e) {
            e.preventDefault();

            const newDiscount = {
                id: Date.now(),
                name: document.getElementById('admin-add-name').value,
                discount: document.getElementById('admin-add-discount').value,
                address: document.getElementById('admin-add-address').value,
                category: document.getElementById('admin-add-category').value,
                premium: document.getElementById('admin-add-premium').value || null,
                discountValue: parseInt(document.getElementById('admin-add-discountValue').value) || 10,
                lat: parseFloat(document.getElementById('admin-add-lat').value) || 50.2093 + (Math.random() - 0.5) * 0.02,
                lng: parseFloat(document.getElementById('admin-add-lng').value) || 15.8327 + (Math.random() - 0.5) * 0.02,
                conditions: document.getElementById('admin-add-conditions').value,
                isic: document.getElementById('admin-add-isic').checked,
                avgSaving: parseInt(document.getElementById('admin-add-avgSaving').value) || 30,
                verified: true,
                rating: 4.0,
                ratingCount: 0,
                usedCount: 0,
                usedThisMonth: 0,
                reviews: [],
                updatedAt: new Date().toISOString().split('T')[0]
            };

            discounts.push(newDiscount);

            // Reset form
            document.getElementById('admin-add-name').value = '';
            document.getElementById('admin-add-discount').value = '';
            document.getElementById('admin-add-address').value = '';
            document.getElementById('admin-add-category').value = '';
            document.getElementById('admin-add-premium').value = '';
            document.getElementById('admin-add-discountValue').value = '';
            document.getElementById('admin-add-lat').value = '';
            document.getElementById('admin-add-lng').value = '';
            document.getElementById('admin-add-conditions').value = '';
            document.getElementById('admin-add-isic').checked = false;
            document.getElementById('admin-add-avgSaving').value = '';

            renderAdminDiscounts();
            renderPremiumList();
            renderCategoryGrid();
            renderMarkers();
            renderDiscountList();
            updateStats();
            showToast('Sleva byla p≈ôid√°na! üéâ', 'success');
            
            // Switch to all discounts tab
            switchAdminTab('all');
        }

        // Category grid
        function renderCategoryGrid() {
            const grid = document.getElementById('category-grid');
            if (!grid) return;

            const categoryCounts = {};
            Object.keys(categoryEmojis).forEach(cat => {
                categoryCounts[cat] = discounts.filter(d => d.category === cat && d.verified).length;
            });

            grid.innerHTML = Object.entries(categoryEmojis).map(([key, emoji]) => `
                <div class="category-item">
                    <div class="category-item-info">
                        <span class="category-item-emoji">${emoji}</span>
                        <div>
                            <div class="category-item-name">${categoryNames[key]}</div>
                            <div class="category-item-count">${categoryCounts[key]} slev</div>
                        </div>
                    </div>
                    <div class="category-item-actions">
                        <button class="table-btn table-btn-edit" onclick="editCategory('${key}')" title="Upravit">‚úèÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function addCategory(e) {
            e.preventDefault();
            const emoji = document.getElementById('new-category-emoji').value.trim();
            const name = document.getElementById('new-category-name').value.trim();
            const key = document.getElementById('new-category-key').value.trim().toLowerCase();

            if (!emoji || !name || !key) {
                showToast('Vypl≈à v≈°echna pole', 'error');
                return;
            }

            if (categoryEmojis[key]) {
                showToast('Kategorie s t√≠mto kl√≠ƒçem ji≈æ existuje', 'error');
                return;
            }

            categoryEmojis[key] = emoji;
            categoryNames[key] = name;

            // Add to category filters
            const filtersDiv = document.getElementById('category-filters');
            const newChip = document.createElement('button');
            newChip.className = 'category-chip';
            newChip.dataset.category = key;
            newChip.onclick = () => setCategory(key);
            newChip.textContent = `${emoji} ${name}`;
            filtersDiv.appendChild(newChip);

            // Add to admin selects
            const selects = ['admin-add-category', 'edit-category', 'admin-category-filter'];
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = `${emoji} ${name}`;
                    select.appendChild(option);
                }
            });

            // Clear form
            document.getElementById('new-category-emoji').value = '';
            document.getElementById('new-category-name').value = '';
            document.getElementById('new-category-key').value = '';

            renderCategoryGrid();
            showToast(`Kategorie "${name}" byla p≈ôid√°na! üéâ`, 'success');
        }

        function editCategory(key) {
            const newEmoji = prompt(`Nov√© emoji pro "${categoryNames[key]}"`, categoryEmojis[key]);
            if (newEmoji) {
                categoryEmojis[key] = newEmoji;
                
                // Update filter chips
                const chip = document.querySelector(`.category-chip[data-category="${key}"]`);
                if (chip) {
                    chip.textContent = `${newEmoji} ${categoryNames[key]}`;
                }
                
                renderCategoryGrid();
                renderMarkers();
                renderDiscountList();
                renderAdminDiscounts();
                showToast('Kategorie upravena! ‚úÖ', 'success');
            }
        }

        // Premium list for quick management
        function renderPremiumList() {
            const list = document.getElementById('premium-list');
            const searchTerm = document.getElementById('premium-search')?.value.toLowerCase() || '';
            
            if (!list) return;

            let filtered = discounts.filter(d => {
                const matchSearch = d.name.toLowerCase().includes(searchTerm) || d.address.toLowerCase().includes(searchTerm);
                return matchSearch && d.verified;
            });

            // Sort: premium first, then sponsored, then regular
            filtered.sort((a, b) => {
                const order = { recommended: 0, sponsored: 1, null: 2 };
                return (order[a.premium] ?? 2) - (order[b.premium] ?? 2);
            });

            list.innerHTML = filtered.map(d => `
                <div class="admin-discount-card ${d.premium === 'recommended' ? 'premium-card' : d.premium === 'sponsored' ? 'sponsored-card' : ''}" style="margin-bottom: 0.75rem;">
                    <div class="admin-card-header">
                        <div class="admin-card-title">
                            <span style="font-size:1.3rem">${categoryEmojis[d.category]}</span>
                            <h4 style="font-size:0.95rem">${d.name}</h4>
                        </div>
                        <span class="table-badge ${d.premium === 'recommended' ? 'premium' : d.premium === 'sponsored' ? 'sponsored' : 'normal'}">
                            ${d.premium === 'recommended' ? '‚≠ê' : d.premium === 'sponsored' ? 'üì¢' : 'üìç'}
                        </span>
                    </div>
                    <div class="admin-card-actions" style="margin-top: 0.5rem;">
                        <button class="admin-action-btn ${d.premium === 'recommended' ? 'remove-status' : 'premium-btn'}" onclick="setDiscountPremium(${d.id}, '${d.premium === 'recommended' ? '' : 'recommended'}')" style="font-size:0.75rem;padding:0.4rem 0.6rem;">
                            ${d.premium === 'recommended' ? '‚ûñ Odebrat' : '‚≠ê Doporuƒçit'}
                        </button>
                        <button class="admin-action-btn ${d.premium === 'sponsored' ? 'remove-status' : 'sponsored-btn'}" onclick="setDiscountPremium(${d.id}, '${d.premium === 'sponsored' ? '' : 'sponsored'}')" style="font-size:0.75rem;padding:0.4rem 0.6rem;">
                            ${d.premium === 'sponsored' ? '‚ûñ Odebrat' : 'üì¢ Sponzor'}
                        </button>
                        <button class="admin-action-btn edit" onclick="setDealOfDay(${d.id})" style="font-size:0.75rem;padding:0.4rem 0.6rem;">
                            üî• Sleva dne
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterPremiumDiscounts() {
            renderPremiumList();
        }

        // Set deal of the day
        function setDealOfDay(id) {
            dealOfDayId = id;
            const d = discounts.find(x => x.id === id);
            if (d) {
                document.getElementById('deal-name').textContent = d.name;
                document.getElementById('deal-discount').textContent = d.discount + ' sleva';
                showToast(`${d.name} je nyn√≠ sleva dne! üî•`, 'success');
            }
        }
    </script>
</body>
</html>
